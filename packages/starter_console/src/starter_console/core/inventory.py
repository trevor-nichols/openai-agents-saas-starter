"""Shared configuration metadata used across Starter Console commands."""

from __future__ import annotations

from typing import Final

# Environment variables that the setup wizard currently prompts operators to
# populate. Keeping this list centralized allows the config commands and any
# reporting utilities to reason about coverage without duplicating literals.
WIZARD_PROMPTED_ENV_VARS: Final[frozenset[str]] = frozenset(
    {
        "ENVIRONMENT",
        "DEBUG",
        "PORT",
        "APP_PUBLIC_URL",
        "ALLOWED_HOSTS",
        "ALLOWED_ORIGINS",
        "ALLOWED_HEADERS",
        "ALLOWED_METHODS",
        "AUTO_RUN_MIGRATIONS",
        "API_BASE_URL",
        "APP_NAME",
        "APP_DESCRIPTION",
        "APP_VERSION",
        "SECRET_KEY",
        "REQUIRE_EMAIL_VERIFICATION",
        "ACCESS_TOKEN_EXPIRE_MINUTES",
        "AUTH_PASSWORD_PEPPER",
        "AUTH_REFRESH_TOKEN_PEPPER",
        "AUTH_EMAIL_VERIFICATION_TOKEN_PEPPER",
        "AUTH_PASSWORD_RESET_TOKEN_PEPPER",
        "AUTH_SESSION_ENCRYPTION_KEY",
        "AUTH_SESSION_IP_HASH_SALT",
        "AUTH_AUDIENCE",
        "AUTH_KEY_STORAGE_BACKEND",
        "AUTH_KEY_STORAGE_PROVIDER",
        "AUTH_KEY_STORAGE_PATH",
        "AUTH_KEY_SECRET_NAME",
        "AUTH_IP_LOCKOUT_DURATION_MINUTES",
        "AUTH_IP_LOCKOUT_THRESHOLD",
        "AUTH_IP_LOCKOUT_WINDOW_MINUTES",
        "AUTH_LOCKOUT_DURATION_MINUTES",
        "AUTH_LOCKOUT_THRESHOLD",
        "AUTH_LOCKOUT_WINDOW_MINUTES",
        "AUTH_PASSWORD_HISTORY_COUNT",
        "AUTH_REFRESH_TOKEN_TTL_MINUTES",
        "AUTH_JWKS_CACHE_SECONDS",
        "AUTH_JWKS_ETAG_SALT",
        "AUTH_JWKS_MAX_AGE_SECONDS",
        "OPENAI_API_KEY",
        "ANTHROPIC_API_KEY",
        "GEMINI_API_KEY",
        "XAI_API_KEY",
        "REDIS_URL",
        "RATE_LIMIT_REDIS_URL",
        "AUTH_CACHE_REDIS_URL",
        "SECURITY_TOKEN_REDIS_URL",
        "BILLING_EVENTS_REDIS_URL",
        "ENABLE_BILLING",
        "ENABLE_BILLING_STREAM",
        "ENABLE_BILLING_RETRY_WORKER",
        "ENABLE_BILLING_STREAM_REPLAY",
        "BILLING_RETRY_DEPLOYMENT_MODE",
        "ENABLE_USAGE_GUARDRAILS",
        "USAGE_GUARDRAIL_CACHE_TTL_SECONDS",
        "USAGE_GUARDRAIL_SOFT_LIMIT_MODE",
        "USAGE_GUARDRAIL_CACHE_BACKEND",
        "USAGE_GUARDRAIL_REDIS_URL",
        "STRIPE_SECRET_KEY",
        "STRIPE_WEBHOOK_SECRET",
        "STRIPE_PRODUCT_PRICE_MAP",
        "RESEND_EMAIL_ENABLED",
        "RESEND_BASE_URL",
        "RESEND_API_KEY",
        "RESEND_DEFAULT_FROM",
        "RESEND_EMAIL_VERIFICATION_TEMPLATE_ID",
        "RESEND_PASSWORD_RESET_TEMPLATE_ID",
        "SSO_GOOGLE_ENABLED",
        "SSO_GOOGLE_SCOPE",
        "SSO_GOOGLE_TENANT_ID",
        "SSO_GOOGLE_TENANT_SLUG",
        "SSO_GOOGLE_ISSUER_URL",
        "SSO_GOOGLE_DISCOVERY_URL",
        "SSO_GOOGLE_CLIENT_ID",
        "SSO_GOOGLE_CLIENT_SECRET",
        "SSO_GOOGLE_SCOPES",
        "SSO_GOOGLE_PKCE_REQUIRED",
        "SSO_GOOGLE_TOKEN_AUTH_METHOD",
        "SSO_GOOGLE_ID_TOKEN_ALGS",
        "SSO_GOOGLE_AUTO_PROVISION_POLICY",
        "SSO_GOOGLE_ALLOWED_DOMAINS",
        "SSO_GOOGLE_DEFAULT_ROLE",
        "ENABLE_SLACK_STATUS_NOTIFICATIONS",
        "SLACK_STATUS_BOT_TOKEN",
        "SLACK_STATUS_DEFAULT_CHANNELS",
        "SLACK_STATUS_TENANT_CHANNEL_MAP",
        "SLACK_API_BASE_URL",
        "SLACK_HTTP_TIMEOUT_SECONDS",
        "SLACK_STATUS_RATE_LIMIT_WINDOW_SECONDS",
        "SLACK_STATUS_MAX_RETRIES",
        "EMAIL_VERIFICATION_EMAIL_RATE_LIMIT_PER_HOUR",
        "EMAIL_VERIFICATION_IP_RATE_LIMIT_PER_HOUR",
        "EMAIL_VERIFICATION_TOKEN_TTL_MINUTES",
        "PASSWORD_RESET_EMAIL_RATE_LIMIT_PER_HOUR",
        "PASSWORD_RESET_IP_RATE_LIMIT_PER_HOUR",
        "PASSWORD_RESET_TOKEN_TTL_MINUTES",
        "STATUS_SUBSCRIPTION_EMAIL_RATE_LIMIT_PER_HOUR",
        "STATUS_SUBSCRIPTION_IP_RATE_LIMIT_PER_HOUR",
        "STATUS_SUBSCRIPTION_TOKEN_TTL_MINUTES",
        "STATUS_SUBSCRIPTION_WEBHOOK_TIMEOUT_SECONDS",
        "STATUS_SUBSCRIPTION_ENCRYPTION_KEY",
        "STATUS_SUBSCRIPTION_TOKEN_PEPPER",
        "TENANT_DEFAULT_SLUG",
        "JWT_ALGORITHM",
        "LOGGING_SINKS",
        "LOG_LEVEL",
        "LOGGING_DATADOG_API_KEY",
        "LOGGING_DATADOG_SITE",
        "LOGGING_OTLP_ENDPOINT",
        "LOGGING_OTLP_HEADERS",
        "ENABLE_OTEL_COLLECTOR",
        "OTEL_EXPORTER_SENTRY_ENDPOINT",
        "OTEL_EXPORTER_SENTRY_AUTH_HEADER",
        "OTEL_EXPORTER_SENTRY_HEADERS",
        "OTEL_EXPORTER_DATADOG_API_KEY",
        "OTEL_EXPORTER_DATADOG_SITE",
        "GEOIP_PROVIDER",
        "GEOIP_MAXMIND_LICENSE_KEY",
        "GEOIP_IP2LOCATION_API_KEY",
        "INFISICAL_BASE_URL",
        "INFISICAL_SERVICE_TOKEN",
        "INFISICAL_PROJECT_ID",
        "INFISICAL_ENVIRONMENT",
        "INFISICAL_SECRET_PATH",
        "INFISICAL_CA_BUNDLE_PATH",
        "INFISICAL_SIGNING_SECRET_NAME",
        "INFISICAL_CACHE_TTL_SECONDS",
        "AWS_REGION",
        "AWS_PROFILE",
        "AWS_ACCESS_KEY_ID",
        "AWS_SECRET_ACCESS_KEY",
        "AWS_SESSION_TOKEN",
        "AWS_SM_SIGNING_SECRET_ARN",
        "AWS_SM_CACHE_TTL_SECONDS",
        "AZURE_KEY_VAULT_URL",
        "AZURE_KV_SIGNING_SECRET_NAME",
        "AZURE_TENANT_ID",
        "AZURE_CLIENT_ID",
        "AZURE_CLIENT_SECRET",
        "AZURE_MANAGED_IDENTITY_CLIENT_ID",
        "AZURE_KV_CACHE_TTL_SECONDS",
        "GCP_SM_PROJECT_ID",
        "GCP_SM_SIGNING_SECRET_NAME",
        "GCP_SM_CACHE_TTL_SECONDS",
        "CHAT_RATE_LIMIT_PER_MINUTE",
        "CHAT_STREAM_RATE_LIMIT_PER_MINUTE",
        "CHAT_STREAM_CONCURRENT_LIMIT",
        "BILLING_STREAM_RATE_LIMIT_PER_MINUTE",
        "BILLING_STREAM_CONCURRENT_LIMIT",
        "RATE_LIMIT_KEY_PREFIX",
        "SIGNUP_ACCESS_POLICY",
        "ALLOW_PUBLIC_SIGNUP",
        "ALLOW_SIGNUP_TRIAL_OVERRIDE",
        "SIGNUP_RATE_LIMIT_PER_HOUR",
        "SIGNUP_RATE_LIMIT_PER_IP_DAY",
        "SIGNUP_RATE_LIMIT_PER_EMAIL_DAY",
        "SIGNUP_RATE_LIMIT_PER_DOMAIN_DAY",
        "SIGNUP_CONCURRENT_REQUESTS_LIMIT",
        "SIGNUP_DEFAULT_PLAN_CODE",
        "SIGNUP_DEFAULT_TRIAL_DAYS",
        "VAULT_VERIFY_ENABLED",
        "VAULT_ADDR",
        "VAULT_TOKEN",
        "VAULT_TRANSIT_KEY",
        "VAULT_NAMESPACE",
        "DATABASE_ECHO",
        "DATABASE_POOL_SIZE",
        "DATABASE_MAX_OVERFLOW",
        "DATABASE_POOL_RECYCLE",
        "DATABASE_POOL_TIMEOUT",
        "DATABASE_HEALTH_TIMEOUT",
        "SECRETS_PROVIDER",
        "ENABLE_SECRETS_PROVIDER_TELEMETRY",
        "DATABASE_URL",
        "STORAGE_PROVIDER",
        "STORAGE_BUCKET_PREFIX",
        "MINIO_ENDPOINT",
        "MINIO_ACCESS_KEY",
        "MINIO_SECRET_KEY",
        "MINIO_REGION",
        "MINIO_SECURE",
        "GCS_PROJECT_ID",
        "GCS_BUCKET",
        "GCS_CREDENTIALS_PATH",
        "GCS_CREDENTIALS_JSON",
        "GCS_SIGNING_EMAIL",
        "GCS_UNIFORM_ACCESS",
        "S3_BUCKET",
        "S3_REGION",
        "S3_ENDPOINT_URL",
        "S3_FORCE_PATH_STYLE",
        "AZURE_BLOB_CONTAINER",
        "AZURE_BLOB_CONNECTION_STRING",
        "AZURE_BLOB_ACCOUNT_URL",
        # Image generation defaults
        "IMAGE_DEFAULT_SIZE",
        "IMAGE_DEFAULT_QUALITY",
        "IMAGE_DEFAULT_FORMAT",
        "IMAGE_DEFAULT_BACKGROUND",
        "IMAGE_DEFAULT_COMPRESSION",
        "IMAGE_OUTPUT_MAX_MB",
        "IMAGE_MAX_PARTIAL_IMAGES",
    }
)

# Frontend env vars that the wizard can populate for the Next.js app when the
# frontend workspace exists locally.
FRONTEND_ENV_VARS: Final[frozenset[str]] = frozenset(
    {
        "NEXT_PUBLIC_API_URL",
        "PLAYWRIGHT_BASE_URL",
        "AGENT_API_MOCK",
        "AGENT_FORCE_SECURE_COOKIES",
        "AGENT_ALLOW_INSECURE_COOKIES",
    }
)

__all__ = ["WIZARD_PROMPTED_ENV_VARS", "FRONTEND_ENV_VARS"]
