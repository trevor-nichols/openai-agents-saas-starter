# Purpose: Environment variables template for {{PROJECT_NAME}}
# Dependencies: python-dotenv
# Used by: app/core/config.py for loading configuration


# =============================================================================
# 00. APPLICATION & ENVIRONMENT
# =============================================================================
APP_NAME=openai-agents-saas-starter
APP_DESCRIPTION="openai-agents-saas-starter FastAPI microservice"
APP_VERSION=1.0.0

ENVIRONMENT=development                        # development | staging | production
PORT=8000

APP_PUBLIC_URL=http://localhost:3000
API_BASE_URL=http://localhost:8000
ALLOWED_HOSTS=localhost


# =============================================================================
# 01. FRONTEND / CORS / PUBLIC URLS
# =============================================================================
ALLOWED_ORIGINS=                               # Extra origins (APP_PUBLIC_URL always allowed)
ALLOWED_METHODS="GET,POST,PUT,DELETE,OPTIONS"
ALLOWED_HEADERS="*"


# =============================================================================
# 02. AI PROVIDER API KEYS
# =============================================================================
OPENAI_API_KEY=your-openai-api-key-here
ANTHROPIC_API_KEY=your-anthropic-api-key-here
GEMINI_API_KEY=your-gemini-api-key-here
XAI_API_KEY=your-xai-api-key-here


# =============================================================================
# 02A. AI MODEL SELECTION (AGENTS)
# =============================================================================
# Global default model for agent specs (used unless a spec fixes `model=...` or selects a bucket via `model_key`).
# For cheaper local testing, you can set this to `gpt-5-mini`.
AGENT_MODEL_DEFAULT=gpt-5.1

# Optional bucket overrides used by agent specs with `model_key="triage"|"code"|"data"`.
# If unset, each bucket falls back to AGENT_MODEL_DEFAULT.
AGENT_MODEL_TRIAGE=
AGENT_MODEL_CODE=
AGENT_MODEL_DATA=


# =============================================================================
# 03. SECURITY & AUTH (JWT / KEYS / PEPPERS)
# =============================================================================
SECRET_KEY=replace-with-long-random-secret
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

AUTH_JWKS_MAX_AGE_SECONDS=300
AUTH_JWKS_ETAG_SALT=dev-jwks-salt

AUTH_PASSWORD_PEPPER=replace-with-random-string
AUTH_REFRESH_TOKEN_PEPPER=replace-with-random-string
AUTH_EMAIL_VERIFICATION_TOKEN_PEPPER=replace-with-random-string
AUTH_PASSWORD_RESET_TOKEN_PEPPER=replace-with-random-string
AUTH_SESSION_ENCRYPTION_KEY=replace-with-strong-key-material

AUTH_AUDIENCE="[\"agent-api\", \"analytics-service\", \"billing-worker\", \"support-console\", \"synthetic-monitor\"]"
AUTH_KEY_STORAGE_BACKEND=file                  # file | secret-manager
AUTH_KEY_STORAGE_PATH=var/keys/keyset.json


# =============================================================================
# 04. DATABASE SETTINGS
# =============================================================================
POSTGRES_PORT=5433
DATABASE_URL="postgresql+asyncpg://postgres:postgres@localhost:5433/saas_starter_db"

AUTO_RUN_MIGRATIONS=true                       # true | false
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30.0
DATABASE_POOL_RECYCLE=1800
DATABASE_HEALTH_TIMEOUT=5.0
DATABASE_ECHO=true                             # true | false


# =============================================================================
# 05. REDIS & CACHING
# =============================================================================
REDIS_PORT=6380
REDIS_URL=redis://localhost:6380/0

RATE_LIMIT_REDIS_URL=                          # Optional; defaults to REDIS_URL
AUTH_CACHE_REDIS_URL=                          # Optional; defaults to REDIS_URL
SECURITY_TOKEN_REDIS_URL=                      # Optional; defaults to REDIS_URL
USAGE_GUARDRAIL_REDIS_URL=                     # Optional; defaults to REDIS_URL
ACTIVITY_EVENTS_REDIS_URL=                     # Optional; defaults to REDIS_URL
BILLING_EVENTS_REDIS_URL=                      # Optional; defaults to REDIS_URL


# =============================================================================
# 06. STORAGE
# =============================================================================
STORAGE_PROVIDER=minio                         # minio | gcs
STORAGE_BUCKET_PREFIX=agent-data

# MINIO
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_REGION=
MINIO_SECURE=false                             # true | false


# =============================================================================
# 07. EMAIL DELIVERY (RESEND)
# =============================================================================
RESEND_EMAIL_ENABLED=false                     # true | false
RESEND_BASE_URL=https://api.resend.com
RESEND_API_KEY=your-resend-api-key-here
RESEND_DEFAULT_FROM=contact@example.com
RESEND_EMAIL_VERIFICATION_TEMPLATE_ID=
RESEND_PASSWORD_RESET_TEMPLATE_ID=


# =============================================================================
# 08. BILLING / STRIPE / SUBSCRIPTION STATUS
# =============================================================================
ENABLE_BILLING=false                           # true | false
ENABLE_BILLING_STREAM=false                    # true | false
ENABLE_BILLING_STREAM_REPLAY=false             # true | false
ENABLE_BILLING_RETRY_WORKER=true               # true | false
BILLING_RETRY_DEPLOYMENT_MODE=inline           # inline | worker

# STRIPE
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret
STRIPE_PRODUCT_PRICE_MAP='{"starter":"price_test_starter","pro":"price_test_pro"}'

# STATUS SUBSCRIPTION
STATUS_SUBSCRIPTION_ENCRYPTION_KEY=replace-with-32-byte-hex-or-base64
STATUS_SUBSCRIPTION_TOKEN_PEPPER=replace-with-random-string
STATUS_SUBSCRIPTION_EMAIL_RATE_LIMIT_PER_HOUR=5
STATUS_SUBSCRIPTION_IP_RATE_LIMIT_PER_HOUR=20
STATUS_SUBSCRIPTION_TOKEN_TTL_MINUTES=60
STATUS_SUBSCRIPTION_WEBHOOK_TIMEOUT_SECONDS=5


# =============================================================================
# 09. SIGNUP / ONBOARDING
# =============================================================================
ALLOW_PUBLIC_SIGNUP=true
SIGNUP_ACCESS_POLICY=public                    # public | invite-only

SIGNUP_RATE_LIMIT_PER_IP_DAY=90
SIGNUP_RATE_LIMIT_PER_EMAIL_DAY=3
SIGNUP_RATE_LIMIT_PER_DOMAIN_DAY=20
SIGNUP_CONCURRENT_REQUESTS_LIMIT=2
SIGNUP_RATE_LIMIT_PER_HOUR=15

REQUIRE_EMAIL_VERIFICATION=false
ALLOW_SIGNUP_TRIAL_OVERRIDE=false

SIGNUP_DEFAULT_PLAN_CODE=starter
SIGNUP_DEFAULT_TRIAL_DAYS=21

TENANT_DEFAULT_SLUG=local


# =============================================================================
# 10. RATE LIMITING / SECURITY POLICIES
# =============================================================================
AUTH_IP_LOCKOUT_THRESHOLD=50
AUTH_IP_LOCKOUT_WINDOW_MINUTES=10
AUTH_IP_LOCKOUT_DURATION_MINUTES=10

AUTH_LOCKOUT_THRESHOLD=5
AUTH_LOCKOUT_WINDOW_MINUTES=60
AUTH_LOCKOUT_DURATION_MINUTES=60

AUTH_PASSWORD_HISTORY_COUNT=5
AUTH_REFRESH_TOKEN_TTL_MINUTES=43200

EMAIL_VERIFICATION_TOKEN_TTL_MINUTES=60
EMAIL_VERIFICATION_EMAIL_RATE_LIMIT_PER_HOUR=3
EMAIL_VERIFICATION_IP_RATE_LIMIT_PER_HOUR=10

PASSWORD_RESET_EMAIL_RATE_LIMIT_PER_HOUR=5
PASSWORD_RESET_IP_RATE_LIMIT_PER_HOUR=20
PASSWORD_RESET_TOKEN_TTL_MINUTES=30

CHAT_RATE_LIMIT_PER_MINUTE=60
CHAT_STREAM_RATE_LIMIT_PER_MINUTE=30
CHAT_STREAM_CONCURRENT_LIMIT=5

BILLING_STREAM_RATE_LIMIT_PER_MINUTE=20
BILLING_STREAM_CONCURRENT_LIMIT=3

RATE_LIMIT_KEY_PREFIX=rate-limit


# =============================================================================
# 11. GEOIP & NETWORK SETTINGS
# =============================================================================
GEOIP_PROVIDER=none                            # none | ipinfo | ip2location | maxmind_db | ip2location_db
GEOIP_CACHE_TTL_SECONDS=900
GEOIP_CACHE_MAX_ENTRIES=4096
GEOIP_HTTP_TIMEOUT_SECONDS=2.0


# =============================================================================
# 12. LOGGING & NOTIFICATIONS
# =============================================================================
LOG_LEVEL=INFO                                 # DEBUG | INFO | WARNING | ERROR | CRITICAL | NOTSET
LOGGING_SINKS=stdout,file                      # stdout | console | file | datadog | otlp | none (none must be alone)
LOG_ROOT=var/log

# SLACK
ENABLE_SLACK_STATUS_NOTIFICATIONS=false        # true | false


# =============================================================================
# 13. SECRETS PROVIDER / VAULT
# =============================================================================
SECRETS_PROVIDER=vault_dev                     # vault_dev | vault_hcp | infisical_cloud | infisical_self_host | aws_sm | azure_kv
ENABLE_SECRETS_PROVIDER_TELEMETRY=false        # true | false

# VAULT
VAULT_VERIFY_ENABLED=false                     # true | false
VAULT_ADDR=http://127.0.0.1:18200
VAULT_TOKEN=vault-dev-root
VAULT_TRANSIT_KEY=auth-service
VAULT_NAMESPACE=


# =============================================================================
# 14. EXTERNAL API SETTINGS (PLACEHOLDER)
# =============================================================================
# EXTERNAL_API_URL=https://api.example.com
# EXTERNAL_API_KEY=your-api-key-here


# =============================================================================
# 15. DEV CONVENIENCE / LOCAL DEFAULTS
# =============================================================================
DEV_USER_PASSWORD=SuperSecurePass123!
AUTO_DEV_USER=false                            # true | false
AUTH_CLI_DEV_AUTH_MODE=vault                   # vault | local
