========================================================================
SEARCH: ENVIRONMENT
========================================================================
./packages/starter_cli/src/starter_cli/core/inventory.py:12:        "ENVIRONMENT",
./packages/starter_cli/src/starter_cli/core/inventory.py:118:        "INFISICAL_ENVIRONMENT",
./tools/smoke/platform_smoke.py:48:os.environ.setdefault("ENVIRONMENT", "local")
./packages/starter_cli/src/starter_cli/services/security/signing.py:25:from ...core.constants import SAFE_ENVIRONMENTS
./packages/starter_cli/src/starter_cli/services/security/signing.py:182:    env = (settings.environment if settings else os.getenv("ENVIRONMENT", "development")).lower()
./packages/starter_cli/src/starter_cli/services/security/signing.py:193:    return enabled_flag or (env not in SAFE_ENVIRONMENTS and not debug)
./docs/trackers/OVERLAPPING_VARIABLES.md:3:* `ENVIRONMENT`
./docs/trackers/OVERLAPPING_VARIABLES.md:9:* `ENVIRONMENT` (e.g. `development|staging|production`) is the single source of truth, and
./packages/starter_cli/src/starter_cli/core/constants.py:21:SAFE_ENVIRONMENTS = {"development", "dev", "local", "test"}
./packages/starter_cli/src/starter_cli/commands/doctor.py:18:        help="Deployment profile (defaults to ENVIRONMENT or 'local').",
./docs/ops/provider-parity.md:11:| Provider | Feature Toggle | Required Env Vars | Dev (`ENVIRONMENT=development`) | Hardened envs (`ENVIRONMENT!=development` & `DEBUG=false`) |
./docs/trackers/CLI_ENV_INVENTORY.md:95:| ENVIRONMENT | str | development |  | ✅ | Deployment environment label (development, staging, production, etc.) |
./docs/trackers/CLI_ENV_INVENTORY.md:123:| INFISICAL_ENVIRONMENT | str \| NoneType | — |  | ✅ | Infisical environment slug (e.g., dev, staging, prod). |
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:111:            "ENVIRONMENT": "development",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:132:            "ENVIRONMENT": "staging",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:257:        provider=HeadlessInputProvider(answers={"ENVIRONMENT": "development"}),
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:270:        provider=HeadlessInputProvider(answers={"ENVIRONMENT": "development"}),
./packages/starter_cli/tests/unit/test_cli_config_commands.py:24:    assert any(entry["env_var"] == "ENVIRONMENT" for entry in data)
./packages/starter_cli/tests/unit/test_cli_config_commands.py:25:    env_entry = next(entry for entry in data if entry["env_var"] == "ENVIRONMENT")
./packages/starter_cli/tests/unit/test_setup_inputs.py:19:    file_a.write_text(json.dumps({"ENVIRONMENT": "production", "DEBUG": False}), encoding="utf-8")
./packages/starter_cli/tests/unit/test_setup_inputs.py:25:        "ENVIRONMENT": "production",
./packages/starter_cli/tests/unit/cli/test_common_headers.py:11:    monkeypatch.setenv("ENVIRONMENT", "development")
./packages/starter_cli/tests/unit/cli/test_common_headers.py:24:    monkeypatch.setenv("ENVIRONMENT", "production")
./packages/starter_cli/tests/unit/cli/test_common_headers.py:35:    monkeypatch.setenv("ENVIRONMENT", "production")
./packages/starter_cli/tests/unit/home/test_provider_probes.py:71:        "INFISICAL_ENVIRONMENT": "dev",
./packages/starter_cli/tests/unit/test_setup_wizard.py:55:        "ENVIRONMENT": "development",
./packages/starter_cli/tests/unit/test_setup_wizard.py:364:        "ENVIRONMENT": "production",
./packages/starter_cli/tests/unit/test_setup_wizard.py:448:        "ENVIRONMENT": "development",
./packages/starter_cli/tests/unit/test_setup_wizard.py:521:        "ENVIRONMENT": "development",
./packages/starter_cli/tests/unit/test_setup_wizard.py:585:        "ENVIRONMENT": "development",
./packages/starter_cli/tests/unit/test_setup_wizard.py:662:        "ENVIRONMENT": "development",
./packages/starter_cli/tests/unit/test_setup_wizard.py:725:        "ENVIRONMENT": "staging",
./packages/starter_cli/tests/unit/cli/providers/test_infisical.py:17:            "INFISICAL_ENVIRONMENT": "dev",
./packages/starter_cli/tests/unit/cli/providers/test_infisical.py:43:            "INFISICAL_ENVIRONMENT": "dev",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:31:        key="ENVIRONMENT",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:32:        prompt="Environment label (ENVIRONMENT)",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:33:        default=context.current("ENVIRONMENT") or env_default,
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:36:    context.set_backend("ENVIRONMENT", environment)
./packages/starter_cli/src/starter_cli/workflows/secrets/providers/infisical.py:77:        key="INFISICAL_ENVIRONMENT",
./packages/starter_cli/src/starter_cli/workflows/secrets/providers/infisical.py:114:        "INFISICAL_ENVIRONMENT": environment,
./docs/trackers/complete/MILESTONE_TRACKER.md:32:| Core & Metadata | ENV label, URLs, auth defaults | Keep defaults (`ENVIRONMENT=development`, `DEBUG=true`); auto migrations true | Explicit hostnames, `DEBUG=false`, stricter CORS |
./packages/starter_cli/src/starter_cli/workflows/home/doctor.py:12:from starter_cli.core.constants import PROJECT_ROOT, SAFE_ENVIRONMENTS
./packages/starter_cli/src/starter_cli/workflows/home/doctor.py:26:        self.warn_only = (profile.lower() in SAFE_ENVIRONMENTS) and not strict
./packages/starter_cli/src/starter_cli/workflows/home/doctor.py:253:    return os.getenv("ENVIRONMENT", "local")
./packages/starter_cli/src/starter_cli/workflows/home/probes/secrets.py:61:    required = ("INFISICAL_PROJECT_ID", "INFISICAL_ENVIRONMENT", "INFISICAL_SERVICE_TOKEN")
./docs/contracts/settings.schema.json:740:    "ENVIRONMENT": {
./docs/contracts/settings.schema.json:883:    "INFISICAL_ENVIRONMENT": {
./docs/environments/staging.answers.template.json:2:  "ENVIRONMENT": "staging",
./docs/environments/production.answers.template.json:2:  "ENVIRONMENT": "production",
./docs/security/secrets-providers.md:30:| `INFISICAL_ENVIRONMENT` | — | ✅ | — | Environment slug (dev/staging/prod). |
./docs/security/secrets-providers.md:47:> **Hardening requirement (Nov 2025):** FastAPI now refuses to start when `ENVIRONMENT`
./docs/security/vault-transit-signing.md:52:1. `just vault-up` – starts `hashicorp/vault` in dev mode on `http://127.0.0.1:18200`, enables the Transit engine, and prints the env vars you need to export (`VAULT_ADDR`, `VAULT_TOKEN`, `VAULT_TRANSIT_KEY`, `VAULT_VERIFY_ENABLED=true`). The backend now enforces these values whenever `ENVIRONMENT` is not one of `development/dev/local/test`.
./apps/api-service/src/app/infrastructure/redis/factory.py:100:                f"ENVIRONMENT={self._settings.environment}."
./apps/api-service/src/run.py:25:# ENVIRONMENT CONFIGURATION
./apps/api-service/README.md:84:ENVIRONMENT=development
./apps/api-service/README.md:167:Flip `RESEND_EMAIL_ENABLED=true` only after you have verified the sender domain inside Resend and populated both `RESEND_API_KEY` and `RESEND_DEFAULT_FROM`. Leave the template ID and Vault fields empty for local development—the backend uses safe defaults until you enable those features—but treat every pepper/secret as mandatory before staging or production. As of November 2025 the API refuses to boot with `ENVIRONMENT` other than `development/dev/local/test` (or with `DEBUG=false`) unless `VAULT_VERIFY_ENABLED=true` **and** the Vault fields are populated. The Starter CLI wizard enforces this automatically for `--profile staging|production` runs, prompting for Vault Transit connectivity and writing the necessary env vars.
./apps/api-service/README.md:559:Run `python tools/check_secrets.py` (or add it to CI) to verify you replaced every placeholder secret before deploying. Production/staging boots will now fail fast if `ENVIRONMENT` isn’t a dev value and the defaults remain.
./apps/api-service/tests/integration/test_observability_collector.py:114:                "ENVIRONMENT": "test",
./apps/api-service/src/app/core/settings/base.py:15:SAFE_ENVIRONMENTS = {"development", "dev", "local", "test"}
./apps/api-service/src/app/core/settings/security.py:9:from .base import SAFE_ENVIRONMENTS, BaseAppSettings
./apps/api-service/src/app/core/settings/security.py:322:        return not debug_mode and env not in SAFE_ENVIRONMENTS
./apps/api-service/src/app/core/settings/providers.py:69:        alias="INFISICAL_ENVIRONMENT",
./apps/api-service/src/app/core/settings/application.py:6:from .base import SAFE_ENVIRONMENTS
./apps/api-service/src/app/core/settings/application.py:26:        alias="ENVIRONMENT",
./apps/api-service/src/app/core/settings/application.py:61:        if self.debug or self.environment.lower() in SAFE_ENVIRONMENTS:
./apps/api-service/tests/unit/config/test_config.py:292:    monkeypatch.setenv("ENVIRONMENT", "production")
./apps/api-service/tests/unit/config/test_config.py:320:        ENVIRONMENT="development",
./apps/api-service/tests/unit/config/test_config.py:331:        ENVIRONMENT="production",
./apps/api-service/tests/unit/config/test_config.py:342:        ENVIRONMENT="production",
./apps/api-service/tests/unit/config/test_secret_guard.py:54:            "ENVIRONMENT": "production",


========================================================================
SEARCH: DEBUG
========================================================================
./docs/ops/provider-parity.md:11:| Provider | Feature Toggle | Required Env Vars | Dev (`ENVIRONMENT=development`) | Hardened envs (`ENVIRONMENT!=development` & `DEBUG=false`) |
./apps/api-service/tests/integration/test_observability_collector.py:76:        "OTEL_DEBUG_VERBOSITY": "detailed",
./docs/integrations/openai-agents-sdk/examples/other_ai_providers/litellm_auto.py:16:# logging.basicConfig(level=logging.DEBUG)
./apps/api-service/tests/unit/usage/test_usage_recorder.py:74:    caplog.set_level(logging.DEBUG)
./apps/api-service/README.md:85:DEBUG=true
./apps/api-service/README.md:167:Flip `RESEND_EMAIL_ENABLED=true` only after you have verified the sender domain inside Resend and populated both `RESEND_API_KEY` and `RESEND_DEFAULT_FROM`. Leave the template ID and Vault fields empty for local development—the backend uses safe defaults until you enable those features—but treat every pepper/secret as mandatory before staging or production. As of November 2025 the API refuses to boot with `ENVIRONMENT` other than `development/dev/local/test` (or with `DEBUG=false`) unless `VAULT_VERIFY_ENABLED=true` **and** the Vault fields are populated. The Starter CLI wizard enforces this automatically for `--profile staging|production` runs, prompting for Vault Transit connectivity and writing the necessary env vars.
./apps/api-service/tests/unit/config/test_config.py:294:    monkeypatch.setenv("DEBUG", "false")
./docs/integrations/openai-agents-sdk/tools/mcp-tools/examples/connector_gmail_mcp.py:10:# logging.basicConfig(level=logging.DEBUG)
./apps/api-service/tests/unit/config/test_secret_guard.py:53:            "DEBUG": False,
./apps/api-service/tests/unit/config/test_secret_guard.py:65:    settings = _settings({"DEBUG": True})
./docs/security/secrets-providers.md:48:> is anything other than `development/dev/local/test` (and `DEBUG` is false) unless
./tools/smoke/platform_smoke.py:49:os.environ.setdefault("DEBUG", "false")
./docs/observability/README.md:42:| `OTEL_DEBUG_VERBOSITY` | Collector debug exporter verbosity (`detailed` default). | Manual |
./docs/environments/production.answers.template.json:3:  "DEBUG": "false",
./docs/environments/staging.answers.template.json:3:  "DEBUG": "false",
./packages/starter_cli/src/starter_cli/services/security/signing.py:186:        else os.getenv("DEBUG", "false").lower() in {"1", "true", "yes"}
./ops/observability/render_collector_config.py:46:        "debug": {"verbosity": env.get("OTEL_DEBUG_VERBOSITY", "detailed")},
./docs/trackers/OVERLAPPING_VARIABLES.md:4:* `DEBUG`
./docs/trackers/OVERLAPPING_VARIABLES.md:10:* `DEBUG` is derived from it (or removed).
./docs/trackers/CLI_ENV_INVENTORY.md:82:| DEBUG | bool | False |  | ✅ | Debug mode |
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:38:    debug_default = context.current_bool("DEBUG", default=context.profile == "local")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:40:        key="DEBUG",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:44:    context.set_backend_bool("DEBUG", debug)
./docs/trackers/complete/MILESTONE_TRACKER.md:32:| Core & Metadata | ENV label, URLs, auth defaults | Keep defaults (`ENVIRONMENT=development`, `DEBUG=true`); auto migrations true | Explicit hostnames, `DEBUG=false`, stricter CORS |
./packages/starter_cli/src/starter_cli/core/inventory.py:13:        "DEBUG",
./docs/trackers/complete/MILESTONE_OBSERVABILITY_COLLECTOR.md:50:- **2025-11-18** — Debug exporter now defaults to `detailed`, `.env` templates expose `OTEL_DEBUG_VERBOSITY`, docs were updated, and the smoke test reads combined `docker logs` output so OTLP payload assertions pass on hosts where the log stream lands on stderr.
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:118:        bools={"DEBUG": True, "AUTO_RUN_MIGRATIONS": False},
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:125:    assert context.backend_env.get("DEBUG") == "true"
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:153:            "LOG_LEVEL": "DEBUG",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:156:            "DEBUG": False,
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:172:    assert env.get("LOG_LEVEL") == "DEBUG"
./packages/starter_cli/tests/unit/test_setup_inputs.py:19:    file_a.write_text(json.dumps({"ENVIRONMENT": "production", "DEBUG": False}), encoding="utf-8")
./packages/starter_cli/tests/unit/test_setup_inputs.py:26:        "DEBUG": "False",
./packages/starter_cli/tests/unit/test_setup_wizard.py:56:        "DEBUG": "true",
./packages/starter_cli/tests/unit/test_setup_wizard.py:365:        "DEBUG": "false",
./packages/starter_cli/tests/unit/test_setup_wizard.py:449:        "DEBUG": "true",
./packages/starter_cli/tests/unit/test_setup_wizard.py:522:        "DEBUG": "true",
./packages/starter_cli/tests/unit/test_setup_wizard.py:586:        "DEBUG": "true",
./packages/starter_cli/tests/unit/test_setup_wizard.py:663:        "DEBUG": "true",
./packages/starter_cli/tests/unit/test_setup_wizard.py:726:        "DEBUG": "false",


========================================================================
SEARCH: APP_PUBLIC_URL
========================================================================
./docs/ops/resend-email-runbook.md:15:   - `APP_PUBLIC_URL=https://app.example.com`
./docs/ops/resend-email-runbook.md:28:- Links derive from `APP_PUBLIC_URL`:
./docs/ops/resend-email-runbook.md:29:  - Verification: `<APP_PUBLIC_URL>/verify-email?token=...`
./docs/ops/resend-email-runbook.md:30:  - Password reset: `<APP_PUBLIC_URL>/reset-password?token=...`
./docs/ops/resend-email-runbook.md:76:- [ ] Environment secrets set (`RESEND_API_KEY`, `RESEND_DEFAULT_FROM`, `APP_PUBLIC_URL`).
./docs/contracts/settings.schema.json:270:    "APP_PUBLIC_URL": {
./docs/environments/staging.answers.template.json:5:  "APP_PUBLIC_URL": "https://staging.agents.example.com",
./docs/environments/production.answers.template.json:5:  "APP_PUBLIC_URL": "https://agents.example.com",
./docs/trackers/OVERLAPPING_VARIABLES.md:18:* `APP_PUBLIC_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:27:* Make `ALLOWED_ORIGINS` a full list (comma-separated) and keep `APP_PUBLIC_URL` as “primary frontend URL”.
./docs/trackers/OVERLAPPING_VARIABLES.md:44:* `APP_PUBLIC_URL`
./docs/trackers/CLI_ENV_INVENTORY.md:24:| APP_PUBLIC_URL | str | http://localhost:3000 |  | ✅ | Public base URL used when generating email links. |
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:55:        key="APP_PUBLIC_URL",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:56:        prompt="Public site base URL (APP_PUBLIC_URL)",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:57:        default=context.current("APP_PUBLIC_URL") or "http://localhost:3000",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:60:    context.set_backend("APP_PUBLIC_URL", app_public_url)
./packages/starter_cli/tests/unit/test_cli_imports.py:47:    env_file.write_text("APP_PUBLIC_URL=https://cli.example\n", encoding="utf-8")
./packages/starter_cli/tests/unit/test_cli_imports.py:54:    assert os.environ["APP_PUBLIC_URL"] == "https://cli.example"
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:113:            "APP_PUBLIC_URL": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:134:            "APP_PUBLIC_URL": "https://example.com",
./packages/starter_cli/tests/unit/test_setup_wizard.py:58:        "APP_PUBLIC_URL": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:367:        "APP_PUBLIC_URL": "https://example.com",
./packages/starter_cli/tests/unit/test_setup_wizard.py:451:        "APP_PUBLIC_URL": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:524:        "APP_PUBLIC_URL": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:588:        "APP_PUBLIC_URL": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:665:        "APP_PUBLIC_URL": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:728:        "APP_PUBLIC_URL": "https://staging.example.com",
./docs/trackers/complete/MILESTONE_RESEND_EMAIL_DELIVERY.md:23:   - Introduced `APP_PUBLIC_URL` so operators control the base URL used in verification/reset links; env files + README updated.
./packages/starter_cli/tests/unit/home/test_start_runner.py:79:    monkeypatch.setenv("APP_PUBLIC_URL", "http://localhost:4321")
./packages/starter_cli/tests/unit/home/test_start_runner.py:92:    monkeypatch.setenv("APP_PUBLIC_URL", "https://myteam.ngrok.app")
./packages/starter_cli/tests/unit/home/test_start_runner.py:120:    monkeypatch.setenv("APP_PUBLIC_URL", "http://localhost:3100")
./packages/starter_cli/tests/unit/home/test_start_runner.py:123:    assert env["APP_PUBLIC_URL"].endswith(":3100")
./packages/starter_cli/src/starter_cli/core/inventory.py:15:        "APP_PUBLIC_URL",
./packages/starter_cli/src/starter_cli/workflows/home/probes/frontend.py:11:    base = os.getenv("APP_PUBLIC_URL") or "http://localhost:3000"
./packages/starter_cli/src/starter_cli/workflows/home/probes/frontend.py:24:        remediation="Start the Next.js app (pnpm dev) or fix APP_PUBLIC_URL.",
./packages/starter_cli/src/starter_cli/workflows/home/start.py:277:        # Use APP_PUBLIC_URL when present
./packages/starter_cli/src/starter_cli/workflows/home/start.py:280:        url = os.getenv("APP_PUBLIC_URL", "http://localhost:3000")
./packages/starter_cli/src/starter_cli/workflows/home/start.py:365:        app_url = os.getenv("APP_PUBLIC_URL", "http://localhost:3000")
./packages/starter_cli/src/starter_cli/workflows/home/start.py:489:            # Next.js binds locally; guard the local port even when APP_PUBLIC_URL is remote
./packages/starter_cli/src/starter_cli/workflows/home/start.py:527:        env.setdefault("APP_PUBLIC_URL", "http://localhost:3000")
./packages/starter_cli/src/starter_cli/workflows/home/start.py:546:        return os.getenv("APP_PUBLIC_URL") or "http://localhost:3000"
./packages/starter_cli/src/starter_cli/workflows/home/probes/ports.py:12:    fe_url = os.getenv("APP_PUBLIC_URL") or "http://localhost:3000"
./packages/starter_cli/src/starter_cli/workflows/home/probes/ports.py:29:        None if success else "Start the missing service or adjust API_BASE_URL/APP_PUBLIC_URL."
./apps/api-service/README.md:87:APP_PUBLIC_URL=http://localhost:3000
./apps/api-service/src/app/core/settings/application.py:20:        alias="APP_PUBLIC_URL",


========================================================================
SEARCH: ALLOWED_ORIGINS
========================================================================
./apps/api-service/README.md:89:ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:72:        key="ALLOWED_ORIGINS",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:74:        default=context.current("ALLOWED_ORIGINS")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:78:    context.set_backend("ALLOWED_ORIGINS", allowed_origins)
./apps/api-service/tests/unit/config/test_config.py:308:    monkeypatch.setenv("ALLOWED_ORIGINS", "http://localhost:3000,http://localhost:8000")
./packages/starter_cli/src/starter_cli/core/inventory.py:17:        "ALLOWED_ORIGINS",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:115:            "ALLOWED_ORIGINS": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:136:            "ALLOWED_ORIGINS": "https://example.com",
./packages/starter_cli/tests/unit/test_setup_wizard.py:60:        "ALLOWED_ORIGINS": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:369:        "ALLOWED_ORIGINS": "https://example.com",
./packages/starter_cli/tests/unit/test_setup_wizard.py:453:        "ALLOWED_ORIGINS": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:526:        "ALLOWED_ORIGINS": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:590:        "ALLOWED_ORIGINS": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:667:        "ALLOWED_ORIGINS": "http://localhost:3000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:730:        "ALLOWED_ORIGINS": "https://staging.example.com",
./docs/environments/staging.answers.template.json:7:  "ALLOWED_ORIGINS": "https://staging.agents.example.com,https://api-staging.agents.example.com",
./docs/environments/production.answers.template.json:7:  "ALLOWED_ORIGINS": "https://agents.example.com,https://api.agents.example.com",
./docs/trackers/ISSUE_TRACKER.md:56:| BE-011 | Host + CORS hardening | Trusted-host middleware still allows `*` in prod and SSE responses ship permissive CORS headers, so any domain can hit the API. | Completed | *@codex* | FastAPI now reads `ALLOWED_HOSTS`/`ALLOWED_ORIGINS` env vars with localhost defaults, TrustedHost + CORS middleware share the parsed settings, and env templates document the knobs pending CLI automation. |
./docs/trackers/OVERLAPPING_VARIABLES.md:19:* `ALLOWED_ORIGINS`
./docs/trackers/OVERLAPPING_VARIABLES.md:27:* Make `ALLOWED_ORIGINS` a full list (comma-separated) and keep `APP_PUBLIC_URL` as “primary frontend URL”.
./docs/trackers/OVERLAPPING_VARIABLES.md:45:* `ALLOWED_ORIGINS`
./docs/trackers/CLI_ENV_INVENTORY.md:18:| ALLOWED_ORIGINS | str | http://localhost:3000,http://localhost:8000 |  | ✅ | CORS allowed origins (comma-separated) |


========================================================================
SEARCH: API_BASE_URL
========================================================================
./docs/frontend/data-access.md:170:- Client components and hooks must call `/app/api` routes or server actions—never `fetch(API_BASE_URL)` directly.  
./apps/web-app/lib/config.ts:1:export const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL ?? 'http://localhost:8000';
./docs/contracts/settings.schema.json:1259:    "SLACK_API_BASE_URL": {
./docs/integrations/slack/slack.md:27:| `SLACK_API_BASE_URL` | Override for Slack’s API endpoint (defaults to `https://slack.com/api`). Useful for local testing or EU isolation once Slack exposes it. |
./docs/environments/staging.answers.template.json:11:  "API_BASE_URL": "https://api-staging.agents.example.com",
./docs/environments/production.answers.template.json:11:  "API_BASE_URL": "https://api.agents.example.com",
./docs/trackers/OVERLAPPING_VARIABLES.md:31:* `API_BASE_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:40:* Whether `NEXT_PUBLIC_API_URL` should always equal `API_BASE_URL` (or be derived).
./docs/trackers/OVERLAPPING_VARIABLES.md:46:* `API_BASE_URL`
./docs/trackers/CLI_ENV_INVENTORY.md:170:| SLACK_API_BASE_URL | str | https://slack.com/api |  | ✅ | Slack Web API base URL (override for tests). |
./apps/web-app/lib/server/services/health.ts:3:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/lib/server/services/health.ts:7:const BASE = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;
./apps/web-app/lib/server/services/auth/serviceAccounts.ts:22:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/lib/server/services/auth/serviceAccounts.ts:107:  const baseUrl = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;
./apps/web-app/lib/server/apiClient.ts:2:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/lib/server/apiClient.ts:20:const normalizedBaseUrl = API_BASE_URL.endsWith('/')
./apps/web-app/lib/server/apiClient.ts:21:  ? API_BASE_URL.slice(0, -1)
./apps/web-app/lib/server/apiClient.ts:22:  : API_BASE_URL;
./apps/api-service/src/app/core/settings/integrations.py:67:        alias="SLACK_API_BASE_URL",
./apps/web-app/app/api/v1/openai/containers/[containerId]/files/[fileId]/download/route.ts:3:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/app/api/v1/openai/containers/[containerId]/files/[fileId]/download/route.ts:19:  const baseUrl = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;
./apps/web-app/app/api/v1/openai/files/[fileId]/download/route.ts:3:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/app/api/v1/openai/files/[fileId]/download/route.ts:19:  const baseUrl = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;
./packages/starter_cli/src/starter_cli/commands/status.py:129:        "STATUS_API_BASE_URL",
./apps/web-app/app/api/v1/status/rss/route.ts:3:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/app/api/v1/status/rss/route.ts:7:    const upstream = await fetch(`${API_BASE_URL}/api/v1/status/rss`, { cache: 'no-store' });
./apps/web-app/app/api/v1/logs/route.ts:3:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/app/api/v1/logs/route.ts:5:const BACKEND_LOG_ENDPOINT = `${API_BASE_URL}/api/v1/logs`;
./apps/web-app/app/api/v1/activity/[eventId]/dismiss/route.ts:3:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/app/api/v1/activity/[eventId]/dismiss/route.ts:19:  const baseUrl = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;
./apps/web-app/app/api/v1/activity/[eventId]/read/route.ts:3:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/app/api/v1/activity/[eventId]/read/route.ts:19:  const baseUrl = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;
./apps/web-app/app/api/v1/activity/mark-all-read/route.ts:3:import { API_BASE_URL } from '@/lib/config';
./apps/web-app/app/api/v1/activity/mark-all-read/route.ts:12:  const baseUrl = API_BASE_URL.endsWith('/') ? API_BASE_URL.slice(0, -1) : API_BASE_URL;
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/integrations.py:79:    base_url = context.current("SLACK_API_BASE_URL") or "https://slack.com/api"
./packages/starter_cli/src/starter_cli/workflows/home/start.py:364:        api_url = os.getenv("API_BASE_URL", "http://localhost:8000")
./packages/starter_cli/src/starter_cli/workflows/home/start.py:543:        return os.getenv("API_BASE_URL") or "http://localhost:8000"
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:107:        key="API_BASE_URL",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:109:        default=context.current("API_BASE_URL") or f"http://127.0.0.1:{port_int}",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/core.py:113:    context.set_backend("API_BASE_URL", api_base_url)
./packages/starter_cli/src/starter_cli/workflows/home/probes/api.py:11:    base = os.getenv("API_BASE_URL") or "http://localhost:8000"
./packages/starter_cli/src/starter_cli/workflows/home/probes/api.py:27:            "or fix API_BASE_URL."
./packages/starter_cli/src/starter_cli/workflows/home/probes/ports.py:11:    api_url = os.getenv("API_BASE_URL") or "http://localhost:8000"
./packages/starter_cli/src/starter_cli/workflows/home/probes/ports.py:29:        None if success else "Start the missing service or adjust API_BASE_URL/APP_PUBLIC_URL."
./packages/starter_cli/src/starter_cli/core/inventory.py:21:        "API_BASE_URL",
./packages/starter_cli/src/starter_cli/core/inventory.py:81:        "SLACK_API_BASE_URL",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:116:            "API_BASE_URL": "http://127.0.0.1:8123",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:123:    assert context.backend_env.get("API_BASE_URL") == "http://127.0.0.1:8123"
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:139:            "API_BASE_URL": "https://api.example.com",
./packages/starter_cli/tests/unit/test_setup_wizard.py:63:        "API_BASE_URL": "http://127.0.0.1:8000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:140:    assert "API_BASE_URL=http://127.0.0.1:8000" in env_body
./packages/starter_cli/tests/unit/test_setup_wizard.py:372:        "API_BASE_URL": "https://api.example.com",
./packages/starter_cli/tests/unit/test_setup_wizard.py:456:        "API_BASE_URL": "http://127.0.0.1:8000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:529:        "API_BASE_URL": "http://127.0.0.1:8000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:593:        "API_BASE_URL": "http://127.0.0.1:8000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:670:        "API_BASE_URL": "http://127.0.0.1:8000",
./packages/starter_cli/tests/unit/test_setup_wizard.py:733:        "API_BASE_URL": "https://api.staging.example.com",


========================================================================
SEARCH: NEXT_PUBLIC_API_URL
========================================================================
./docs/frontend/next-16/migrating-to-next-16.md:1099:NEXT_PUBLIC_API_URL="/api"
./docs/frontend/next-16/migrating-to-next-16.md:1106:  const apiUrl = process.env.NEXT_PUBLIC_API_URL
./packages/starter_cli/src/starter_cli/core/inventory.py:182:        "NEXT_PUBLIC_API_URL",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:227:    assert frontend_env.get("NEXT_PUBLIC_API_URL") == "http://internal.example"
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/frontend.py:16:    context.set_frontend("NEXT_PUBLIC_API_URL", context.api_base_url)
./apps/web-app/lib/config.ts:1:export const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL ?? 'http://localhost:8000';
./apps/web-app/tests/utils/testEnv.ts:6:  const raw = process.env.PLAYWRIGHT_API_URL || process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';
./apps/api-service/tests/manual/test_file_search_manual.py:37:    api_env = os.getenv("NEXT_PUBLIC_API_URL")
./apps/api-service/tests/manual/test_image_generation_manual.py:37:    api_env = os.getenv("NEXT_PUBLIC_API_URL")
./apps/api-service/tests/manual/test_web_search_manual.py:12:- Use NEXT_PUBLIC_API_URL if set; else http://localhost:{PORT or 8000}.
./apps/api-service/tests/manual/test_web_search_manual.py:35:    api_env = os.getenv("NEXT_PUBLIC_API_URL")
./apps/api-service/tests/manual/README.md:51:- Uses `NEXT_PUBLIC_API_URL` if set; otherwise `http://localhost:{PORT or 8000}`.
./apps/api-service/tests/manual/test_workflow_manual.py:12:- Use NEXT_PUBLIC_API_URL if set; else http://localhost:{PORT or 8000}.
./apps/api-service/tests/manual/test_workflow_manual.py:36:    api_env = os.getenv("NEXT_PUBLIC_API_URL")
./apps/api-service/tests/manual/test_code_interpreter_manual.py:16:for the dev password; NEXT_PUBLIC_API_URL/PORT for base URL.
./apps/api-service/tests/manual/test_code_interpreter_manual.py:37:    api_env = os.getenv("NEXT_PUBLIC_API_URL")
./docs/trackers/OVERLAPPING_VARIABLES.md:32:* `NEXT_PUBLIC_API_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:40:* Whether `NEXT_PUBLIC_API_URL` should always equal `API_BASE_URL` (or be derived).
./docs/trackers/OVERLAPPING_VARIABLES.md:47:* `NEXT_PUBLIC_API_URL`
./docs/trackers/complete/MILESTONE_TRACKER.md:40:| Frontend | Next.js envs (API URL, Playwright, cookie posture) | `NEXT_PUBLIC_API_URL` from API base, allow insecure cookies | HTTPS URLs only, secure cookies, Playwright hitting deployed host |
./apps/web-app/scripts/test-seed.js:99:    process.env.NEXT_PUBLIC_API_URL ||
./apps/web-app/app/api/v1/test-fixtures/email-verification-token/route.ts:4:  process.env.NEXT_PUBLIC_API_URL ||
./apps/web-app/app/api/v1/test-fixtures/apply/route.ts:4:  process.env.NEXT_PUBLIC_API_URL ||


========================================================================
SEARCH: REDIS_URL
========================================================================
./docs/billing/stripe-setup.md:24:| `BILLING_EVENTS_REDIS_URL` | Redis connection string used for billing pub/sub. Defaults to `REDIS_URL` when omitted. |
./docs/billing/stripe-setup.md:96:- **Redis unavailable** – The SSE endpoint returns `503` when `ENABLE_BILLING_STREAM=true` but no Redis URL is configured. Ensure `BILLING_EVENTS_REDIS_URL` (or `REDIS_URL`) points to a reachable instance.
./apps/api-service/src/main.py:194:            "Rate limiter disabled; RATE_LIMIT_REDIS_URL/REDIS_URL not configured.",
./apps/api-service/src/main.py:228:                "ENABLE_ACTIVITY_STREAM requires ACTIVITY_EVENTS_REDIS_URL or REDIS_URL"
./apps/api-service/src/main.py:398:                    "ENABLE_BILLING_STREAM requires BILLING_EVENTS_REDIS_URL or REDIS_URL"
./docs/ops/usage-guardrails-runbook.md:16:   - `USAGE_GUARDRAIL_REDIS_URL` when the backend is `redis` (leave blank to inherit `REDIS_URL`)
./docs/contracts/settings.schema.json:179:    "ACTIVITY_EVENTS_REDIS_URL": {
./docs/contracts/settings.schema.json:189:      "description": "Redis URL used for activity event streaming (defaults to REDIS_URL).",
./docs/contracts/settings.schema.json:276:    "AUTH_CACHE_REDIS_URL": {
./docs/contracts/settings.schema.json:573:    "BILLING_EVENTS_REDIS_URL": {
./docs/contracts/settings.schema.json:583:      "description": "Redis URL used for billing event pub/sub (defaults to REDIS_URL when unset)",
./docs/contracts/settings.schema.json:1090:    "RATE_LIMIT_REDIS_URL": {
./docs/contracts/settings.schema.json:1100:      "description": "Redis URL dedicated to rate limiting (defaults to REDIS_URL when unset).",
./docs/contracts/settings.schema.json:1199:    "SECURITY_TOKEN_REDIS_URL": {
./docs/contracts/settings.schema.json:1209:      "description": "Redis URL dedicated to nonce/email/password token stores (falls back to REDIS_URL).",
./docs/contracts/settings.schema.json:1423:    "USAGE_GUARDRAIL_REDIS_URL": {
./docs/contracts/settings.schema.json:1433:      "description": "Redis URL dedicated to usage guardrail caches (defaults to REDIS_URL).",
./tools/smoke/platform_smoke.py:51:os.environ.setdefault("REDIS_URL", "redis://localhost:6379/0")
./tools/smoke/platform_smoke.py:52:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./tools/smoke/platform_smoke.py:53:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./tools/smoke/platform_smoke.py:54:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./tools/smoke/platform_smoke.py:55:os.environ.setdefault("USAGE_GUARDRAIL_REDIS_URL", os.environ["REDIS_URL"])
./docs/environments/staging.answers.template.json:44:  "REDIS_URL": "rediss://staging-primary.redis.example.com:6380/0",
./docs/environments/staging.answers.template.json:45:  "RATE_LIMIT_REDIS_URL": "rediss://staging-ratelimit.redis.example.com:6380/0",
./docs/environments/staging.answers.template.json:46:  "AUTH_CACHE_REDIS_URL": "rediss://staging-auth.redis.example.com:6380/0",
./docs/environments/staging.answers.template.json:47:  "SECURITY_TOKEN_REDIS_URL": "rediss://staging-security.redis.example.com:6380/0",
./docs/environments/staging.answers.template.json:48:  "BILLING_EVENTS_REDIS_URL": "rediss://staging-billing.redis.example.com:6380/0",
./docs/environments/staging.answers.template.json:64:  "USAGE_GUARDRAIL_REDIS_URL": "rediss://staging-usage.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:44:  "REDIS_URL": "rediss://prod-primary.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:45:  "RATE_LIMIT_REDIS_URL": "rediss://prod-ratelimit.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:46:  "AUTH_CACHE_REDIS_URL": "rediss://prod-auth.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:47:  "SECURITY_TOKEN_REDIS_URL": "rediss://prod-security.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:48:  "BILLING_EVENTS_REDIS_URL": "rediss://prod-billing.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:64:  "USAGE_GUARDRAIL_REDIS_URL": "rediss://prod-usage.redis.example.com:6380/0",
./apps/api-service/tests/conftest.py:27:os.environ["REDIS_URL"] = "redis://localhost:6379/0"
./apps/api-service/tests/conftest.py:28:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/conftest.py:29:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/conftest.py:30:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/conftest.py:31:os.environ.setdefault("USAGE_GUARDRAIL_REDIS_URL", os.environ["REDIS_URL"])
./packages/starter_cli/src/starter_cli/workflows/setup/schema.yaml:237:  USAGE_GUARDRAIL_REDIS_URL:
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:268:            _env_presence("REDIS_URL", env_snapshot),
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:269:            _env_presence("RATE_LIMIT_REDIS_URL", env_snapshot, required=False),
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:270:            _env_presence("AUTH_CACHE_REDIS_URL", env_snapshot, required=False),
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:271:            _env_presence("SECURITY_TOKEN_REDIS_URL", env_snapshot, required=False),
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:272:            _env_presence("BILLING_EVENTS_REDIS_URL", env_snapshot, required=False),
./apps/api-service/src/app/services/users/throttling.py:81:        raise RuntimeError("AUTH_CACHE_REDIS_URL (or REDIS_URL) is required for IP throttling.")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:117:            context.set_backend("USAGE_GUARDRAIL_REDIS_URL", redis_url)
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:119:            context.unset_backend("USAGE_GUARDRAIL_REDIS_URL")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:121:        context.unset_backend("USAGE_GUARDRAIL_REDIS_URL")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:138:        context.unset_backend("USAGE_GUARDRAIL_REDIS_URL")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:210:    default = context.current("USAGE_GUARDRAIL_REDIS_URL") or context.current("REDIS_URL") or ""
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:213:            key="USAGE_GUARDRAIL_REDIS_URL",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:214:            prompt="Usage guardrail Redis URL (blank to reuse REDIS_URL)",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:221:        _record_skip(context, "USAGE_GUARDRAIL_REDIS_URL", "inherit REDIS_URL")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/usage.py:223:    _record_answer(context, "USAGE_GUARDRAIL_REDIS_URL", value)
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:98:        key="REDIS_URL",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:100:        default=context.current("REDIS_URL") or "redis://localhost:6379/0",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:104:    context.set_backend("REDIS_URL", primary)
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:127:    _configure_optional("RATE_LIMIT_REDIS_URL", "Rate limiting")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:128:    _configure_optional("AUTH_CACHE_REDIS_URL", "Auth/session cache")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:129:    _configure_optional("SECURITY_TOKEN_REDIS_URL", "Security token")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:132:        key="BILLING_EVENTS_REDIS_URL",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:134:        default=context.current("BILLING_EVENTS_REDIS_URL") or "",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:139:        context.set_backend("BILLING_EVENTS_REDIS_URL", billing)
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:142:        context.set_backend("BILLING_EVENTS_REDIS_URL", "")
./packages/starter_cli/src/starter_cli/workflows/home/probes/redis.py:16:    url = os.getenv("RATE_LIMIT_REDIS_URL") or os.getenv("REDIS_URL")
./packages/starter_cli/src/starter_cli/workflows/home/probes/redis.py:22:            detail="REDIS_URL not set",
./packages/starter_cli/src/starter_cli/workflows/home/probes/redis.py:23:            remediation="Set REDIS_URL (or RATE_LIMIT_REDIS_URL) via wizard or env files.",
./packages/starter_cli/src/starter_cli/workflows/home/probes/redis.py:33:            detail=f"Unsupported REDIS_URL scheme '{scheme or 'unknown'}' (expected redis/rediss)",
./packages/starter_cli/src/starter_cli/workflows/home/probes/redis.py:34:            remediation="Point REDIS_URL to Redis (redis:// or rediss://).",
./packages/starter_cli/src/starter_cli/core/inventory.py:53:        "REDIS_URL",
./packages/starter_cli/src/starter_cli/core/inventory.py:54:        "RATE_LIMIT_REDIS_URL",
./packages/starter_cli/src/starter_cli/core/inventory.py:55:        "AUTH_CACHE_REDIS_URL",
./packages/starter_cli/src/starter_cli/core/inventory.py:56:        "SECURITY_TOKEN_REDIS_URL",
./packages/starter_cli/src/starter_cli/core/inventory.py:57:        "BILLING_EVENTS_REDIS_URL",
./packages/starter_cli/src/starter_cli/core/inventory.py:67:        "USAGE_GUARDRAIL_REDIS_URL",
./apps/api-service/tests/unit/config/test_config.py:169:    assert backend == "BILLING_EVENTS_REDIS_URL"
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:289:            "USAGE_GUARDRAIL_REDIS_URL": "redis://cache:6379/7",
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:307:    assert env.get("USAGE_GUARDRAIL_REDIS_URL") == "redis://cache:6379/7"
./packages/starter_cli/tests/unit/test_setup_wizard_sections.py:350:    assert env.get("USAGE_GUARDRAIL_REDIS_URL") is None
./packages/starter_cli/tests/unit/test_setup_wizard.py:73:        "REDIS_URL": "redis://localhost:6379/0",
./packages/starter_cli/tests/unit/test_setup_wizard.py:74:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:75:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:76:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:77:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:382:        "REDIS_URL": "rediss://:secret@redis.example.com:6379/0",
./packages/starter_cli/tests/unit/test_setup_wizard.py:383:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:384:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:385:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:386:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:463:        "REDIS_URL": "redis://localhost:6379/0",
./packages/starter_cli/tests/unit/test_setup_wizard.py:464:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:465:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:466:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:467:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:536:        "REDIS_URL": "redis://localhost:6379/0",
./packages/starter_cli/tests/unit/test_setup_wizard.py:537:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:538:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:539:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:540:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:600:        "REDIS_URL": "redis://localhost:6379/0",
./packages/starter_cli/tests/unit/test_setup_wizard.py:601:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:602:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:603:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:604:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:677:        "REDIS_URL": "redis://localhost:6379/0",
./packages/starter_cli/tests/unit/test_setup_wizard.py:678:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:679:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:680:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:681:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:743:        "REDIS_URL": "rediss://:secret@redis.example:6380/0",
./packages/starter_cli/tests/unit/test_setup_wizard.py:744:        "RATE_LIMIT_REDIS_URL": "rediss://:secret@redis.example:6380/2",
./packages/starter_cli/tests/unit/test_setup_wizard.py:745:        "AUTH_CACHE_REDIS_URL": "rediss://:secret@redis.example:6380/3",
./packages/starter_cli/tests/unit/test_setup_wizard.py:746:        "SECURITY_TOKEN_REDIS_URL": "rediss://:secret@redis.example:6380/4",
./packages/starter_cli/tests/unit/test_setup_wizard.py:747:        "BILLING_EVENTS_REDIS_URL": "rediss://:secret@redis.example:6380/1",
./apps/api-service/justfile:51:	export REDIS_URL="${REDIS_URL:-redis://localhost:6379/0}"
./apps/api-service/justfile:52:	export RATE_LIMIT_REDIS_URL="${RATE_LIMIT_REDIS_URL:-$REDIS_URL}"
./apps/api-service/justfile:53:	export AUTH_CACHE_REDIS_URL="${AUTH_CACHE_REDIS_URL:-$REDIS_URL}"
./apps/api-service/justfile:54:	export SECURITY_TOKEN_REDIS_URL="${SECURITY_TOKEN_REDIS_URL:-$REDIS_URL}"
./apps/api-service/justfile:55:	export USAGE_GUARDRAIL_REDIS_URL="${USAGE_GUARDRAIL_REDIS_URL:-$REDIS_URL}"
./apps/api-service/tests/contract/test_activity_api.py:15:os.environ.setdefault("REDIS_URL", "redis://localhost:6379/0")
./apps/api-service/tests/contract/test_auth_users.py:16:os.environ.setdefault("REDIS_URL", "redis://localhost:6379/0")
./apps/api-service/tests/contract/test_auth_users.py:17:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_auth_users.py:18:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_auth_users.py:19:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./packages/starter_cli/tests/unit/home/test_probes_phase1.py:26:    monkeypatch.setenv("REDIS_URL", "redis://localhost:6379/0")
./apps/api-service/src/app/infrastructure/redis/factory.py:88:                "Set the dedicated variable or REDIS_URL."
./apps/api-service/tests/contract/test_agents_api.py:15:os.environ.setdefault("REDIS_URL", "redis://localhost:6379/0")
./apps/api-service/tests/contract/test_agents_api.py:16:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_agents_api.py:17:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_agents_api.py:18:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/src/app/infrastructure/security/nonce_store.py:43:            "SECURITY_TOKEN_REDIS_URL (or REDIS_URL) is required for nonce storage."
./apps/api-service/src/app/infrastructure/security/nonce_store.py:68:                "SECURITY_TOKEN_REDIS_URL (or REDIS_URL) is required for nonce storage."
./apps/api-service/tests/contract/test_workflows_api.py:15:os.environ.setdefault("REDIS_URL", "redis://localhost:6379/0")
./apps/api-service/src/app/infrastructure/security/password_reset_store.py:67:            "SECURITY_TOKEN_REDIS_URL (or REDIS_URL) is required for password reset tokens."
./apps/api-service/tests/contract/__init__.py:8:os.environ["REDIS_URL"] = "redis://localhost:6379/0"
./apps/api-service/tests/contract/__init__.py:9:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/__init__.py:10:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/__init__.py:11:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/src/app/infrastructure/security/email_verification_store.py:70:            "SECURITY_TOKEN_REDIS_URL (or REDIS_URL) is required for email verification tokens."
./apps/api-service/tests/contract/test_status_api.py:9:os.environ.setdefault("REDIS_URL", "redis://localhost:6379/0")
./apps/api-service/tests/contract/test_status_api.py:10:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_status_api.py:11:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_status_api.py:12:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/src/app/infrastructure/persistence/auth/user_repository.py:364:            "AUTH_CACHE_REDIS_URL (or REDIS_URL) is required to build the lockout store."
./docs/observability/activity-log.md:26:- Settings: `ENABLE_ACTIVITY_STREAM`, `ACTIVITY_EVENTS_REDIS_URL`, `ACTIVITY_STREAM_MAX_LENGTH`, `ACTIVITY_STREAM_TTL_SECONDS`.
./docs/trackers/ISSUE_TRACKER.md:60:| INFRA-004 | Production-grade Redis | Rate limiting, billing streams, lockout counters, and nonce stores all share a single unauthenticated Redis URL. | Completed | *@codex* | Nov 16 2025 — introduced `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, `SECURITY_TOKEN_REDIS_URL`, the Redis client factory, hardened TLS/auth checks, CLI/env docs, and rewired all consumers (see `docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md`). |
./docs/trackers/OVERLAPPING_VARIABLES.md:58:* `REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:59:* `RATE_LIMIT_REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:60:* `AUTH_CACHE_REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:61:* `SECURITY_TOKEN_REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:62:* `BILLING_EVENTS_REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:64:**Why:** `REDIS_URL` is a general Redis connection string; the others are more specific.
./docs/trackers/OVERLAPPING_VARIABLES.md:67:* Decide whether specialized URLs are optional overrides that fall back to `REDIS_URL`, or required for each subsystem.
./docs/trackers/OVERLAPPING_VARIABLES.md:68:* In code, make that explicit (e.g., `RATE_LIMIT_REDIS_URL or REDIS_URL`).
./docs/trackers/OVERLAPPING_VARIABLES.md:74:* `REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:75:* `BILLING_EVENTS_REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:81:* It never accidentally falls back to the base `REDIS_URL` unless you really want that.
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:27:- [ ] `REDIS_URL` — ❌ missing
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:28:- [ ] `RATE_LIMIT_REDIS_URL` _(optional)_ — ❌ missing
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:29:- [ ] `AUTH_CACHE_REDIS_URL` _(optional)_ — ❌ missing
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:30:- [ ] `SECURITY_TOKEN_REDIS_URL` _(optional)_ — ❌ missing
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:31:- [ ] `BILLING_EVENTS_REDIS_URL` _(optional)_ — ❌ missing
./docs/trackers/CLI_ENV_INVENTORY.md:27:| AUTH_CACHE_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL dedicated to auth/session caches like refresh tokens and lockouts. |
./docs/trackers/CLI_ENV_INVENTORY.md:64:| BILLING_EVENTS_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL used for billing event pub/sub (defaults to REDIS_URL when unset) |
./docs/trackers/CLI_ENV_INVENTORY.md:149:| RATE_LIMIT_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL dedicated to rate limiting (defaults to REDIS_URL when unset). |
./docs/trackers/CLI_ENV_INVENTORY.md:150:| REDIS_URL | str | redis://localhost:6379/0 |  | ✅ | Redis connection URL |
./docs/trackers/CLI_ENV_INVENTORY.md:160:| SECURITY_TOKEN_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL dedicated to nonce/email/password token stores (falls back to REDIS_URL). |
./docs/trackers/CLI_ENV_INVENTORY.md:194:| USAGE_GUARDRAIL_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL dedicated to usage guardrail caches (defaults to REDIS_URL). |
./apps/api-service/src/app/core/settings/redis.py:15:        description="Redis URL dedicated to rate limiting (defaults to REDIS_URL when unset).",
./apps/api-service/src/app/core/settings/redis.py:16:        alias="RATE_LIMIT_REDIS_URL",
./apps/api-service/src/app/core/settings/redis.py:21:        alias="AUTH_CACHE_REDIS_URL",
./apps/api-service/src/app/core/settings/redis.py:26:            "Redis URL dedicated to nonce/email/password token stores (falls back to REDIS_URL)."
./apps/api-service/src/app/core/settings/redis.py:28:        alias="SECURITY_TOKEN_REDIS_URL",
./apps/api-service/src/app/core/settings/redis.py:32:        description="Redis URL dedicated to usage guardrail caches (defaults to REDIS_URL).",
./apps/api-service/src/app/core/settings/redis.py:33:        alias="USAGE_GUARDRAIL_REDIS_URL",
./apps/api-service/README.md:102:REDIS_URL=redis://localhost:6379/0
./apps/api-service/README.md:103:BILLING_EVENTS_REDIS_URL=
./apps/api-service/README.md:104:ACTIVITY_EVENTS_REDIS_URL=
./docs/trackers/complete/MILESTONE_USAGE_GUARDRAILS.md:64:- **2025-11-18** — Usage cache now supports Redis via `USAGE_GUARDRAIL_CACHE_BACKEND`/`USAGE_GUARDRAIL_REDIS_URL`, and the setup wizard exposes those prompts so operators can pick Redis or per-process memory.
./apps/api-service/src/app/core/settings/activity.py:18:        description="Redis URL used for activity event streaming (defaults to REDIS_URL).",
./apps/api-service/src/app/core/settings/activity.py:19:        alias="ACTIVITY_EVENTS_REDIS_URL",
./apps/api-service/src/app/core/settings/database.py:69:        description="Redis URL used for billing event pub/sub (defaults to REDIS_URL when unset)",
./apps/api-service/src/app/core/settings/database.py:70:        alias="BILLING_EVENTS_REDIS_URL",
./apps/api-service/src/app/core/settings/database.py:110:            redis_source = "BILLING_EVENTS_REDIS_URL"
./apps/api-service/src/app/core/settings/database.py:112:            redis_source = "REDIS_URL"
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:12:| Rate limiting | ✅ Complete | Dedicated `RATE_LIMIT_REDIS_URL` with TLS/auth enforcement wired through the new factory + rate limiter bootstrap. |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:13:| Auth & session caches | ✅ Complete | `AUTH_CACHE_REDIS_URL` feeds login throttles, lockouts, refresh-token cache, and password history via shared clients managed by the factory. |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:14:| Nonce/token stores | ✅ Complete | `SECURITY_TOKEN_REDIS_URL` backs nonce/email/password/token stores with per-loop caches and hardened clients. |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:15:| Billing streams | ✅ Complete | Billing SSE backend now uses a dedicated client sourced from `BILLING_EVENTS_REDIS_URL` (fallback `REDIS_URL`) with factory-managed lifetime. |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:20:| Rate limiting | `RateLimiter`, signup guards, chat/billing streaming quotas | `RATE_LIMIT_REDIS_URL` (`REDIS_URL`) | Dedicated logical DB/instance, TLS (`rediss://`) + auth outside local/dev, short TTL tuning |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:21:| Auth/session cache | Login throttler, lockout store, refresh-token cache, password history | `AUTH_CACHE_REDIS_URL` (`REDIS_URL`) | Long-lived connections, pipelining safe, stored data considered PII ⇒ require auth + ACL |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:22:| Security tokens | Vault nonce store, email verification, password reset, status alert tokens | `SECURITY_TOKEN_REDIS_URL` (`REDIS_URL`) | Must fail closed; TTL-critical; same TLS/auth requirements |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:23:| Billing streams | Stripe replay/backfill service + SSE endpoints | `BILLING_EVENTS_REDIS_URL` (`REDIS_URL`) | Streams need persistence + higher maxlen; SSE readiness gated on connectivity |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:39:- **2025-11-16**: Implemented `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, and `SECURITY_TOKEN_REDIS_URL`, introduced the Redis client factory + shutdown path, rewired auth/security/billing services, documented the new contract, and updated the CLI wizard/templates.
./docs/trackers/complete/MILESTONE_STARTER_CLI_AUTOMATION_2025-11-15.md:55:| Persistence config | Supply `DATABASE_URL`, `REDIS_URL`, `BILLING_EVENTS_REDIS_URL`, `AUTO_RUN_MIGRATIONS`. | ✅ Target | Wizard M2 collects; automation should validate connectivity post-compose. |


========================================================================
SEARCH: RATE_LIMIT_REDIS_URL
========================================================================
./packages/starter_cli/src/starter_cli/core/inventory.py:54:        "RATE_LIMIT_REDIS_URL",
./docs/contracts/settings.schema.json:1090:    "RATE_LIMIT_REDIS_URL": {
./apps/api-service/src/main.py:194:            "Rate limiter disabled; RATE_LIMIT_REDIS_URL/REDIS_URL not configured.",
./docs/environments/staging.answers.template.json:45:  "RATE_LIMIT_REDIS_URL": "rediss://staging-ratelimit.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:45:  "RATE_LIMIT_REDIS_URL": "rediss://prod-ratelimit.redis.example.com:6380/0",
./packages/starter_cli/tests/unit/test_setup_wizard.py:74:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:383:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:464:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:537:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:601:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:678:        "RATE_LIMIT_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:744:        "RATE_LIMIT_REDIS_URL": "rediss://:secret@redis.example:6380/2",
./tools/smoke/platform_smoke.py:52:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:269:            _env_presence("RATE_LIMIT_REDIS_URL", env_snapshot, required=False),
./docs/trackers/ISSUE_TRACKER.md:60:| INFRA-004 | Production-grade Redis | Rate limiting, billing streams, lockout counters, and nonce stores all share a single unauthenticated Redis URL. | Completed | *@codex* | Nov 16 2025 — introduced `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, `SECURITY_TOKEN_REDIS_URL`, the Redis client factory, hardened TLS/auth checks, CLI/env docs, and rewired all consumers (see `docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md`). |
./docs/trackers/OVERLAPPING_VARIABLES.md:59:* `RATE_LIMIT_REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:68:* In code, make that explicit (e.g., `RATE_LIMIT_REDIS_URL or REDIS_URL`).
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:28:- [ ] `RATE_LIMIT_REDIS_URL` _(optional)_ — ❌ missing
./docs/trackers/CLI_ENV_INVENTORY.md:149:| RATE_LIMIT_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL dedicated to rate limiting (defaults to REDIS_URL when unset). |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:12:| Rate limiting | ✅ Complete | Dedicated `RATE_LIMIT_REDIS_URL` with TLS/auth enforcement wired through the new factory + rate limiter bootstrap. |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:20:| Rate limiting | `RateLimiter`, signup guards, chat/billing streaming quotas | `RATE_LIMIT_REDIS_URL` (`REDIS_URL`) | Dedicated logical DB/instance, TLS (`rediss://`) + auth outside local/dev, short TTL tuning |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:39:- **2025-11-16**: Implemented `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, and `SECURITY_TOKEN_REDIS_URL`, introduced the Redis client factory + shutdown path, rewired auth/security/billing services, documented the new contract, and updated the CLI wizard/templates.
./packages/starter_cli/src/starter_cli/workflows/home/probes/redis.py:16:    url = os.getenv("RATE_LIMIT_REDIS_URL") or os.getenv("REDIS_URL")
./packages/starter_cli/src/starter_cli/workflows/home/probes/redis.py:23:            remediation="Set REDIS_URL (or RATE_LIMIT_REDIS_URL) via wizard or env files.",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:127:    _configure_optional("RATE_LIMIT_REDIS_URL", "Rate limiting")
./apps/api-service/src/app/core/settings/redis.py:16:        alias="RATE_LIMIT_REDIS_URL",
./apps/api-service/justfile:52:	export RATE_LIMIT_REDIS_URL="${RATE_LIMIT_REDIS_URL:-$REDIS_URL}"
./apps/api-service/tests/conftest.py:28:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_agents_api.py:16:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_status_api.py:10:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_auth_users.py:17:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/__init__.py:9:os.environ.setdefault("RATE_LIMIT_REDIS_URL", os.environ["REDIS_URL"])


========================================================================
SEARCH: AUTH_CACHE_REDIS_URL
========================================================================
./tools/smoke/platform_smoke.py:53:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/justfile:53:	export AUTH_CACHE_REDIS_URL="${AUTH_CACHE_REDIS_URL:-$REDIS_URL}"
./docs/trackers/ISSUE_TRACKER.md:60:| INFRA-004 | Production-grade Redis | Rate limiting, billing streams, lockout counters, and nonce stores all share a single unauthenticated Redis URL. | Completed | *@codex* | Nov 16 2025 — introduced `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, `SECURITY_TOKEN_REDIS_URL`, the Redis client factory, hardened TLS/auth checks, CLI/env docs, and rewired all consumers (see `docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md`). |
./docs/contracts/settings.schema.json:276:    "AUTH_CACHE_REDIS_URL": {
./docs/trackers/OVERLAPPING_VARIABLES.md:60:* `AUTH_CACHE_REDIS_URL`
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:29:- [ ] `AUTH_CACHE_REDIS_URL` _(optional)_ — ❌ missing
./docs/trackers/CLI_ENV_INVENTORY.md:27:| AUTH_CACHE_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL dedicated to auth/session caches like refresh tokens and lockouts. |
./docs/environments/staging.answers.template.json:46:  "AUTH_CACHE_REDIS_URL": "rediss://staging-auth.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:46:  "AUTH_CACHE_REDIS_URL": "rediss://prod-auth.redis.example.com:6380/0",
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:13:| Auth & session caches | ✅ Complete | `AUTH_CACHE_REDIS_URL` feeds login throttles, lockouts, refresh-token cache, and password history via shared clients managed by the factory. |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:21:| Auth/session cache | Login throttler, lockout store, refresh-token cache, password history | `AUTH_CACHE_REDIS_URL` (`REDIS_URL`) | Long-lived connections, pipelining safe, stored data considered PII ⇒ require auth + ACL |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:39:- **2025-11-16**: Implemented `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, and `SECURITY_TOKEN_REDIS_URL`, introduced the Redis client factory + shutdown path, rewired auth/security/billing services, documented the new contract, and updated the CLI wizard/templates.
./apps/api-service/src/app/services/users/throttling.py:81:        raise RuntimeError("AUTH_CACHE_REDIS_URL (or REDIS_URL) is required for IP throttling.")
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:270:            _env_presence("AUTH_CACHE_REDIS_URL", env_snapshot, required=False),
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:128:    _configure_optional("AUTH_CACHE_REDIS_URL", "Auth/session cache")
./packages/starter_cli/tests/unit/test_setup_wizard.py:75:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:384:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:465:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:538:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:602:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:679:        "AUTH_CACHE_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:745:        "AUTH_CACHE_REDIS_URL": "rediss://:secret@redis.example:6380/3",
./packages/starter_cli/src/starter_cli/core/inventory.py:55:        "AUTH_CACHE_REDIS_URL",
./apps/api-service/src/app/core/settings/redis.py:21:        alias="AUTH_CACHE_REDIS_URL",
./apps/api-service/src/app/infrastructure/persistence/auth/user_repository.py:364:            "AUTH_CACHE_REDIS_URL (or REDIS_URL) is required to build the lockout store."
./apps/api-service/tests/contract/test_status_api.py:11:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/__init__.py:10:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_auth_users.py:18:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_agents_api.py:17:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/conftest.py:29:os.environ.setdefault("AUTH_CACHE_REDIS_URL", os.environ["REDIS_URL"])


========================================================================
SEARCH: SECURITY_TOKEN_REDIS_URL
========================================================================
./tools/smoke/platform_smoke.py:54:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./docs/environments/staging.answers.template.json:47:  "SECURITY_TOKEN_REDIS_URL": "rediss://staging-security.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:47:  "SECURITY_TOKEN_REDIS_URL": "rediss://prod-security.redis.example.com:6380/0",
./docs/trackers/ISSUE_TRACKER.md:60:| INFRA-004 | Production-grade Redis | Rate limiting, billing streams, lockout counters, and nonce stores all share a single unauthenticated Redis URL. | Completed | *@codex* | Nov 16 2025 — introduced `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, `SECURITY_TOKEN_REDIS_URL`, the Redis client factory, hardened TLS/auth checks, CLI/env docs, and rewired all consumers (see `docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md`). |
./docs/trackers/OVERLAPPING_VARIABLES.md:61:* `SECURITY_TOKEN_REDIS_URL`
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:30:- [ ] `SECURITY_TOKEN_REDIS_URL` _(optional)_ — ❌ missing
./docs/trackers/CLI_ENV_INVENTORY.md:160:| SECURITY_TOKEN_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL dedicated to nonce/email/password token stores (falls back to REDIS_URL). |
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:271:            _env_presence("SECURITY_TOKEN_REDIS_URL", env_snapshot, required=False),
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:129:    _configure_optional("SECURITY_TOKEN_REDIS_URL", "Security token")
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:14:| Nonce/token stores | ✅ Complete | `SECURITY_TOKEN_REDIS_URL` backs nonce/email/password/token stores with per-loop caches and hardened clients. |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:22:| Security tokens | Vault nonce store, email verification, password reset, status alert tokens | `SECURITY_TOKEN_REDIS_URL` (`REDIS_URL`) | Must fail closed; TTL-critical; same TLS/auth requirements |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:39:- **2025-11-16**: Implemented `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, and `SECURITY_TOKEN_REDIS_URL`, introduced the Redis client factory + shutdown path, rewired auth/security/billing services, documented the new contract, and updated the CLI wizard/templates.
./docs/contracts/settings.schema.json:1199:    "SECURITY_TOKEN_REDIS_URL": {
./packages/starter_cli/src/starter_cli/core/inventory.py:56:        "SECURITY_TOKEN_REDIS_URL",
./packages/starter_cli/tests/unit/test_setup_wizard.py:76:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:385:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:466:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:539:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:603:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:680:        "SECURITY_TOKEN_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:746:        "SECURITY_TOKEN_REDIS_URL": "rediss://:secret@redis.example:6380/4",
./apps/api-service/justfile:54:	export SECURITY_TOKEN_REDIS_URL="${SECURITY_TOKEN_REDIS_URL:-$REDIS_URL}"
./apps/api-service/tests/contract/test_status_api.py:12:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/__init__.py:11:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_auth_users.py:19:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/contract/test_agents_api.py:18:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/tests/conftest.py:30:os.environ.setdefault("SECURITY_TOKEN_REDIS_URL", os.environ["REDIS_URL"])
./apps/api-service/src/app/infrastructure/security/nonce_store.py:43:            "SECURITY_TOKEN_REDIS_URL (or REDIS_URL) is required for nonce storage."
./apps/api-service/src/app/infrastructure/security/nonce_store.py:68:                "SECURITY_TOKEN_REDIS_URL (or REDIS_URL) is required for nonce storage."
./apps/api-service/src/app/infrastructure/security/password_reset_store.py:67:            "SECURITY_TOKEN_REDIS_URL (or REDIS_URL) is required for password reset tokens."
./apps/api-service/src/app/infrastructure/security/email_verification_store.py:70:            "SECURITY_TOKEN_REDIS_URL (or REDIS_URL) is required for email verification tokens."
./apps/api-service/src/app/core/settings/redis.py:28:        alias="SECURITY_TOKEN_REDIS_URL",


========================================================================
SEARCH: BILLING_EVENTS_REDIS_URL
========================================================================
./docs/billing/stripe-setup.md:24:| `BILLING_EVENTS_REDIS_URL` | Redis connection string used for billing pub/sub. Defaults to `REDIS_URL` when omitted. |
./docs/billing/stripe-setup.md:96:- **Redis unavailable** – The SSE endpoint returns `503` when `ENABLE_BILLING_STREAM=true` but no Redis URL is configured. Ensure `BILLING_EVENTS_REDIS_URL` (or `REDIS_URL`) points to a reachable instance.
./apps/api-service/src/main.py:398:                    "ENABLE_BILLING_STREAM requires BILLING_EVENTS_REDIS_URL or REDIS_URL"
./docs/contracts/settings.schema.json:573:    "BILLING_EVENTS_REDIS_URL": {
./docs/environments/staging.answers.template.json:48:  "BILLING_EVENTS_REDIS_URL": "rediss://staging-billing.redis.example.com:6380/0",
./docs/environments/production.answers.template.json:48:  "BILLING_EVENTS_REDIS_URL": "rediss://prod-billing.redis.example.com:6380/0",
./apps/api-service/README.md:103:BILLING_EVENTS_REDIS_URL=
./docs/trackers/OVERLAPPING_VARIABLES.md:62:* `BILLING_EVENTS_REDIS_URL`
./docs/trackers/OVERLAPPING_VARIABLES.md:75:* `BILLING_EVENTS_REDIS_URL`
./docs/trackers/templates/STARTER_CLI_CHECKLIST.md:31:- [ ] `BILLING_EVENTS_REDIS_URL` _(optional)_ — ❌ missing
./docs/trackers/CLI_ENV_INVENTORY.md:64:| BILLING_EVENTS_REDIS_URL | str \| NoneType | — |  | ✅ | Redis URL used for billing event pub/sub (defaults to REDIS_URL when unset) |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:15:| Billing streams | ✅ Complete | Billing SSE backend now uses a dedicated client sourced from `BILLING_EVENTS_REDIS_URL` (fallback `REDIS_URL`) with factory-managed lifetime. |
./docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md:23:| Billing streams | Stripe replay/backfill service + SSE endpoints | `BILLING_EVENTS_REDIS_URL` (`REDIS_URL`) | Streams need persistence + higher maxlen; SSE readiness gated on connectivity |
./docs/trackers/complete/MILESTONE_STARTER_CLI_AUTOMATION_2025-11-15.md:55:| Persistence config | Supply `DATABASE_URL`, `REDIS_URL`, `BILLING_EVENTS_REDIS_URL`, `AUTO_RUN_MIGRATIONS`. | ✅ Target | Wizard M2 collects; automation should validate connectivity post-compose. |
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/audit.py:272:            _env_presence("BILLING_EVENTS_REDIS_URL", env_snapshot, required=False),
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:132:        key="BILLING_EVENTS_REDIS_URL",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:134:        default=context.current("BILLING_EVENTS_REDIS_URL") or "",
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:139:        context.set_backend("BILLING_EVENTS_REDIS_URL", billing)
./packages/starter_cli/src/starter_cli/workflows/setup/_wizard/sections/providers.py:142:        context.set_backend("BILLING_EVENTS_REDIS_URL", "")
./packages/starter_cli/src/starter_cli/core/inventory.py:57:        "BILLING_EVENTS_REDIS_URL",
./apps/api-service/src/app/core/settings/database.py:70:        alias="BILLING_EVENTS_REDIS_URL",
./apps/api-service/src/app/core/settings/database.py:110:            redis_source = "BILLING_EVENTS_REDIS_URL"
./packages/starter_cli/tests/unit/test_setup_wizard.py:77:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:386:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:467:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:540:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:604:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:681:        "BILLING_EVENTS_REDIS_URL": "",
./packages/starter_cli/tests/unit/test_setup_wizard.py:747:        "BILLING_EVENTS_REDIS_URL": "rediss://:secret@redis.example:6380/1",
./apps/api-service/tests/unit/config/test_config.py:169:    assert backend == "BILLING_EVENTS_REDIS_URL"


