## Backend Issue Tracker

| ID | Title | Description | Status | Owner | Notes |
|----|-------|-------------|--------|-------|-------|
| FE-001 | Feature directory pattern parity | Audit every `features/<domain>` module against the documented orchestrator/components/hooks/utils pattern, refactor any drift, and spawn follow-up tickets so new work stays aligned. | Completed | *@codex* | Chat, account, billing, dashboard, and settings now follow the feature-sliced layout; monitor new surfaces during code review. |
| FE-002 | Signup guardrail UX parity | Frontend lacked invite-token inputs, marketing request-access funnel, and operator tooling for invites/approvals. | Resolved | *@codex* | Register form now honors policies, marketing CTAs route to `/request-access`, new access-request feature + Storybook shipped, and `/settings/access` exposes invite/request workflows with TanStack-powered tables. |
| BE-001 | SSE stream endpoint mismatch | Frontend streams against `/api/v1/agents/chat/stream` while FastAPI exposes `/api/v1/chat/stream`, breaking real-time updates. | Resolved | *@codex* | Frontend + smoke test now target `/api/v1/chat/stream`. |
| BE-002 | Conversation history lacked durable storage | Conversation history now persists via Postgres-backed repositories, and the legacy in-memory adapter/flag have been removed. | Completed | *@codex* | `.env.compose` ships `DATABASE_URL`, the FastAPI lifespan always boots the async engine, and readiness probes fail fast if Postgres is unavailable. |
| BE-003 | Tool registry lacks agent-specific scoping | `ToolRegistry.get_core_tools()` returns the same tool set for every agent, preventing specialization as catalog grows. | Resolved | *@codex* | Tool metadata now tracks `core`, `agents`, and `capabilities`, `get_tools_for_agent()` filters by that metadata, OpenAIAgentRegistry requests scoped tool lists, tests/docs updated. |
| BE-004 | Authentication is demo-only | `/api/v1/auth` hard-codes demo credentials and issues JWTs without user store or hashing pipeline. | Resolved | *@codex* | FastAPI now backs `/api/v1/auth/*` with the new user/service-account pipeline (Postgres users, bcrypt+pepper hashing, EdDSA tokens, contract tests). |
| BE-005 | Multi-agent handoff not configured | `OpenAIAgentRegistry` provisions specialized agents but never wires `handoffs`, so triage cannot delegate per SDK guidance. | Resolved | *@codex* | Triage agent now uses SDK `handoff(...)` with prompt helper and descriptions. |
| BE-006 | Signup trial override bypass | `/auth/register` forwarded client-supplied `trial_days` directly to Stripe, allowing arbitrarily long free trials. | Resolved | *@codex* | SignupService now derives trial length from plan metadata/defaults and only honors overrides when `allow_signup_trial_override=true`; unit tests and settings docs updated. |
| BE-007 | Multi-provider secrets abstraction | Track work for the `SecretProvider` interface + Starter CLI onboarding described in `docs/trackers/complete/MILESTONE_STARTER_CLI_AUTOMATION_2025-11-15.md`. | Completed | *@codex* | Vault dev/HCP, Infisical (cloud/self-host), AWS Secrets Manager, and Azure Key Vault providers all ship with CLI wizard coverage + telemetry toggles (Nov 15 2025). Future providers will spin up new tickets. |
| BE-008 | Bundle OpenTelemetry Collector dev stack | Ship an optional OpenTelemetry Collector service + CLI wizard flow so operators get a turnkey OTLP endpoint (`http://otel-collector:4318/v1/logs`) and exporter presets for Sentry/Datadog/local stdout without custom infra. | Completed | *@codex* | Nov 18 update: Collector service/config renderer/CLI prompts/docs + Docker smoke test (`api-service/tests/integration/test_observability_collector.py`) landed; Nov 18 hotfix forces the debug exporter to `detailed` so docker logs always show OTLP payloads and the integration test now reads combined stdout/stderr for stability. |
| BE-009 | Usage metering & entitlement guardrails | Implement plan-aware usage collection (messages/input tokens/output tokens), automatic metering from the agent service, enforcement before chat execution, and Starter CLI onboarding so operators can enable or skip quotas without touching code. | Completed | *@codex* | Guardrail instrumentation now emits Prometheus counters + structured logs, README references the new operator runbook, and the CLI wizard artifacts document plan entitlements end-to-end. |
| BE-010 | Usage dashboard/export workflow | Add `starter_cli usage export-report` so operators can dump per-tenant usage vs. plan limits (JSON/CSV) from Postgres rollups without building a UI. | Completed | *@codex* | Modular usage report service + queries landed, CLI command writes `var/reports/usage-dashboard.{json,csv}`, docs/runbook updated, and unit tests cover the workflow + CLI options. |
| DB-001 | Durable conversation schema & migrations | Introduce SQLAlchemy models plus Alembic migration for Postgres conversation/billing tables. | Completed | *@codex* | Alembic scaffold + baseline migration `20251106_120000`; CI smoke tests exercise upgrade/downgrade on Postgres. |
| DB-002 | Async engine bootstrap & configuration | Add Postgres engine/session factory, settings, startup validation, and local tooling support. | Completed | *@codex* | Async engine + health check implemented; document Docker workflow and production toggles shipped with Make targets + Compose helpers. Default tests now pin `DATABASE_URL` to SQLite and require `USE_REAL_POSTGRES=true` before hitting live Postgres. |
| DB-003 | Conversation repository integration | Implement Postgres-backed repository, wire into agent service, and update tests/tooling. | Completed | *@codex* | Repository live with CI coverage (`tests/integration/test_postgres_migrations.py`); retention hooks tracked separately. |
| DB-004 | Agents SDK session integration | Align AgentService with OpenAI Agents SDK session/memory so chat history persists via session tokens. | Completed | *@codex* | `agent_conversations` now tracks `sdk_session_id` + sync metadata, the FastAPI lifespan wires the shared SQLAlchemy session store, AgentService runs chats with SDK sessions, and integration tests cover session persistence across restarts. |
| DB-005 | Billing service scaffold | Ship plan catalog, subscription lifecycle, usage recording, and tests over the Postgres repository. | Completed | *@codex* | `BillingService` drives `/api/v1/billing/*`, backed by `PostgresBillingRepository` + Stripe gateway stubs, with comprehensive unit coverage. |
| DB-006 | API & health hardening | Expose database-aware readiness probes, update docs, and ensure Compose defaults include Postgres settings. | Completed | *@codex* | `/health/ready` now calls `verify_database_connection()`, `.env*` ship `DATABASE_URL`, and docs describe failure modes + setup flow. |
| BILL-001 | Billing service & API scaffolding | Deliver tenant-scoped billing commands (start/update/cancel/usage) with role guards and Stripe-ready hooks. | Completed | *@codex* | Backend + frontend now cover dispatcher orchestration, Redis/SSE payloads, retry tooling, verification suites (`just test-stripe`, CLI replay integration test), and runbooks/metrics so operators can replay or monitor billing flows without touching live Stripe. |
| BILL-002 | Billing event history API | Add paginated `/billing/tenants/{id}/events`, persist cursors, and hydrate the Next.js ledger with TanStack Query + SSE merge. | Completed | *@codex* | Stripe event repository grows tenant pagination, FastAPI exposes queryable history, React Query powers `/billing/events` “Load older” UX while SSE still streams live deltas. |
| AUTH-001 | Threat model & auth requirements | Document JWT consumers, threat boundaries, and approve Ed25519 rollout scope. | Completed | *@codex* | Approved via `docs/auth/idp.md` + `docs/security/auth-threat-model.md`; feeds milestone kickoff doc and security review checklist. |
| AUTH-002 | Ed25519 key management service | Implement key lifecycle module, secure storage contract, and rotation playbooks. | Completed | *@codex* | Simplified single-key storage backed by file/Vault adapters plus the `auth keys rotate` helper (replaces the active key in place). JWKS endpoint and CLI tooling verified 2025-11-07. |
| AUTH-003 | JWT service refactor | Swap PyJWT to EdDSA signer/validator with strict claim schema and pluggable backends. | Completed | *@codex* | **Nonce cache decision:** reuse the Redis revocation cluster with a dedicated prefix (`auth:nonce:*`) and max TTL 5 min; no local in-process fallback remains.<br>**Storage hardening:** `service_account_tokens.refresh_token_hash` now stores bcrypt(+pepper) digests using `AUTH_REFRESH_TOKEN_PEPPER`, truncating legacy plaintext rows via migration `20251106_230500` (satisfies threat-model R10).<br>**Signer refactor:** `TokenSigner`/`TokenVerifier` now wrap the active Ed25519 key from `KeySet`, and refresh tokens persist `signing_kid` (`migration 20251106_235500`) so reuse + revocation rehydrate the correct JWS. Contract + unit suites cover tampering, unknown `kid`, and expiry paths; coverage gate met. |
| AUTH-004 | Self-serve signup & trial onboarding | Add `/auth/register`, tenant bootstrap, and default free/trial plan provisioning so new tenants can create accounts without manual scripts. | Completed | *@codex* | `/auth/register` now enforces per-IP quotas, provisions tenants via the new `SignupService`, and returns a session + tenant slug. Config adds signup toggles + defaults, tenant persistence wraps Postgres, and unit tests cover slug collisions + billing hooks. |
| AUTH-004 | JWKS publishing endpoint | Expose active/next public keys, add caching headers, and verify Next.js consumption. | Completed | *@codex* | JWKS responder now serves only active/next keys, attaches `Cache-Control`, strong `ETag`, and `Last-Modified`, and returns 304s when `If-None-Match` matches. `KeySet.materialize_jwks()` caches DTOs until kids/schema change, settings gained `AUTH_JWKS_MAX_AGE_SECONDS` + `AUTH_JWKS_ETAG_SALT`, and `auth jwks print` CLI command plus Prom counters (`jwks_requests_total`, `jwks_not_modified_total`) shipped. Contract tests cover 200/304 flows; docs updated so consumers poll ≤max-age and honor ETags. |
| AUTH-005 | Auth observability & alerts | Instrument structured logs, metrics, and alerts on token failures/rotation drift. | Removed | *@codex* | Starter scope stops at exposing `/metrics` plus structured logs; Slack/PagerDuty automation dropped as out-of-scope polish. |
| AUTH-006 | Staged rollout & postmortem | Run dual-signing canary, monitor, cutover to EdDSA-only, and capture lessons. | Removed | *@codex* | No staged rollout required before the codebase is public; treat as future ops checklist if production environments emerge. |
| IDP-001 | Human auth requirements & threat model | Document user lifecycle, password policy, lockouts, auditing fields, and external IdP compatibility. | Completed | *@codex* | Approved 2025-11-07: `docs/auth/idp.md` + `docs/security/auth-threat-model.md` baseline downstream scope; handoff to IDP-002. |
| IDP-002 | User data model & migrations | Ship Alembic migration for `users`, `user_profiles`, `user_login_events`, plus seed tooling. | Completed | *@codex* | Migration `0e52ba5ab089` applied (`just migrate`) with ORM models + seed utility; docs/env updated 2025-11-07. |
| IDP-003 | User domain & service layer | Implement `UserRepository`/`UserService`, lockout helpers, bcrypt+pepper hashing, and extend `AuthService` for user login/refresh. | Completed | *@codex* | Repository + service stack merged with Redis-backed lockouts, bcrypt+pepper hashing, and comprehensive unit tests; CI coverage gate met. |
| IDP-004 | Auth API & contract updates | Replace demo `/auth/token` with service-backed login, add register/reset stubs, ensure responses carry token metadata + RBAC context. | Completed | *@codex* | `/api/v1/auth` login/refresh now call the new services, user metadata exposed via `/auth/me`, refresh rotation enforced, and contract suite `tests/contract/test_auth_users.py` green; OpenAPI regenerated. |
| IDP-005 | Frontend login UX | Update Next.js frontend with real login/logout, secure cookie storage, silent refresh, and protected routes. | Completed | *@codex* | Login page, server actions, secure cookie helpers, middleware guard, silent refresh hook, and Playwright smoke test landed in `web-app`. |
| STRIPE-01 | Settings & Secrets Baseline | Add Stripe config fields, env docs, and startup guards so billing can’t boot without credentials. | Completed | *@codex* | FastAPI lifespan now enforces Stripe env vars when `ENABLE_BILLING=true`, logs masked `stripe_config` summaries, and `docs/billing/stripe-setup.md` includes the troubleshooting matrix + log samples. |
| STRIPE-02 | Developer Setup Script | Build `scripts/stripe/setup.py` (CLI checks, Postgres helper, env writers) modeled after the reference script lines 33‑320; include an "easy setup" action that opens Stripe’s guided install/auth page before continuing. | Completed | *@codex* | Flow now lives under `python -m starter_cli.app stripe setup` (aliased via `pnpm stripe:setup`), provisioning Starter/Pro plans, recording `STRIPE_SECRET_KEY`/`STRIPE_WEBHOOK_SECRET`/`STRIPE_PRODUCT_PRICE_MAP`, and documenting the runbook in `docs/scripts/stripe-setup.md`. |
| STRIPE-03 | Stripe Gateway Implementation | Replace stubbed `StripeGateway` with full customer/subscription/usage calls plus retries and observability. | Completed | *@codex* | Gateway now wraps the typed Stripe client with structured logs, Prom counters/histograms, domain error codes, and unit tests covering metrics + usage/idempotency flows; see `app/services/payment_gateway.py`, `app/observability/metrics.py`, and `tests/unit/test_stripe_gateway.py`. |
| STRIPE-04 | Webhook Intake & Event Store | Add FastAPI webhook endpoint, event tables, signature verification, and reconciliation flows; persist every Stripe event type even if only some update state today. | Completed | *@codex* | Shipping the `stripe_event_dispatch` table + Alembic revision, dispatcher service, webhook wiring, replay CLI overhaul, and BillingService sync entrypoints so webhook → domain updates are auditable and replayable. |
| STRIPE-05 | Real-Time Billing Stream | Implement Redis-backed broadcaster + WebSocket/SSE endpoints and wire the Next.js dashboard to consume updates. | Completed | *@codex* | Redis stream publisher, SSE endpoint (+ rate limiting) and frontend listeners are live; integration/unit suites cover replay + SSE flows. |
| STRIPE-06 | Test & Ops Tooling | Add automated tests, fixture replay harness, CLI docs, and runbooks for Stripe key rotation + webhook replay. | Completed | *@codex* | `just test-stripe`, replay CLI, fixture linting, and the updated runbook (now with the Stripe Secret Rotation SOP) document ops + verification steps. |
| AUTH-004 | Protect public chat/catalog APIs | `/api/v1/chat`, `/api/v1/chat/stream`, `/api/v1/agents`, `/api/v1/conversations`, and `/api/v1/tools` skip `require_current_user`, so anonymous users can burn GPT-5.1 quota. | Completed | *@codex* | Shared `require_scopes` dependency + updated routers/tests now enforce JWT scopes (`conversations:*`, `tools:read`, `conversations:delete`) so anonymous or under-scoped callers are rejected. |
| AUTH-005 | Password reset endpoints & history enforcement | Deliver `/auth/password/change` + `/auth/password/reset` backed by password history checks, audit events, and refresh-token revocation. | Completed | *@codex* | FastAPI endpoints, service/repository plumbing, and contract/unit tests merged 2025-11-09; docs + CLI updated. |
| AUTH-006 | Central password policy & IP guardrail | Enforce 14+ char, multi-class, zxcvbn≥3 policy everywhere and throttle abusive /24s via Redis counters. | Completed | *@codex* | New `password_policy` helper, Signup/User services, CLI, and docs updated; Redis-backed IP lockouts wired with metrics/logs and configurable `AUTH_IP_LOCKOUT_*` settings. |
| AUTH-007 | Logout endpoint & server revocation | Add `/auth/logout` (single refresh token) and `/auth/logout/all` (device sweep) so clients can explicitly revoke sessions server-side instead of relying on local token drops. | Completed | *@codex* | Added AuthService `logout_user_session` (verifies ownership, accepts expired tokens, logs audit events) plus FastAPI routes with contract + unit tests; responses return revoke counts so the frontend can surface accurate UX copy. |
| AUTH-008 | Self-serve password recovery | Provide `/auth/password/forgot` + `/auth/password/confirm` that issue signed reset tokens via email and enforce password policy/history when redeemed. | Completed | *@codex* | Redis-backed reset token store, rate-limited request endpoint, confirmation route calling UserService + session revocation, notifier stub, unit/contract tests, and new config knobs (TTL + peppers). |
| AUTH-009 | Email verification lifecycle | Implement `/auth/email/send` and `/auth/email/verify` so new users must confirm ownership before accessing protected routes, with resend throttles and audit trails. | Completed | *@codex* | Added Redis token store + service, signup auto-sends verification, new endpoints with rate limits, JWT/session payload includes `email_verified`, and chat/billing/tooling routes now enforce the verified dependency. |
| AUTH-010 | Session/device management API | Surface `/auth/sessions` (list) and `/auth/sessions/{id}` (revoke) so users can audit active devices, locations, and last activity. | Completed | *@codex* | Added `user_sessions` table + crypto hashing, AuthService now tracks multi-device refresh tokens, FastAPI exposes list/delete endpoints, and responses include stable `session_id` for the frontend sidebar. |
| TENANT-001 | Stop trusting `X-Tenant-Id` header | Billing routes only compare the header to the URL path; callers can spoof another tenant without matching JWT claims. | Completed | *@codex* | `get_tenant_context` now derives tenant + role from JWT claims, rejects mismatched headers, and maps scopes to `TenantRole`; billing routers consume the secured context. |
| BILL-002 | Stripe worker/billing stream multi-pod safety | Every FastAPI replica starts a retry worker and Redis billing stream publisher, so multi-replica deployments will double-handle events. | Completed | *@codex* | Added `ENABLE_BILLING_RETRY_WORKER` + `ENABLE_BILLING_STREAM_REPLAY` toggles, lifespan guards, and doc guidance so only designated pods run the background workers. |
| OPS-001 | Secret management guidance | README/env defaults still ship dev `SECRET_KEY`, peppers, Vault placeholders, and Redis URLs; easy to forget before launch. | Completed | *@codex* | Added `.env.local.example`, runtime guardrails, and `scripts/check_secrets.py` so production builds fail fast when defaults are present. |
| OPS-002 | Abuse/rate limiting on chat & SSE | Even after auth, chat endpoints and billing SSE streams have no throttling or audit trail. | Completed | *@codex* | Redis-backed rate limiter now guards chat + billing SSE (per-user & per-tenant quotas, concurrency caps, metrics, and structured `rate_limit.block` logs); docs/env defaults call out the new settings. |
| BE-011 | Host + CORS hardening | Trusted-host middleware still allows `*` in prod and SSE responses ship permissive CORS headers, so any domain can hit the API. | Completed | *@codex* | FastAPI now reads `ALLOWED_HOSTS`/`ALLOWED_ORIGINS` env vars with localhost defaults, TrustedHost + CORS middleware share the parsed settings, and env templates document the knobs pending CLI automation. |
| SEC-007 | Replace starter secrets & move keysets to Vault | Default peppers/secret key/keyset live in repo and `auth_key_storage_backend` remains `file`. | Resolved | *@codex* | Starter CLI now generates random secrets + records secret-provider choice via the wizard (`starter_cli/workflows/setup/_wizard/context.py`, `starter_cli/workflows/setup/_wizard/sections/secrets.py`), runtime guards fail non-dev boots that keep placeholder secrets or skip Vault verification (`api-service/app/core/config.py:1038-1335`, `api-service/main.py:145-190`), and keysets can be rotated straight into Vault/secret-manager backends (`starter_shared/vault_kv.py`, `starter_cli/commands/auth.py`) with runbooks under `docs/security/secrets-providers.md` and `docs/security/vault-transit-signing.md`. |
| SEC-008 | Enforce Vault-signed service-account requests | `/auth/service-accounts/issue` still relies on `dev-local` fallback because Vault Transit isn’t configured. | Completed | *@codex* | FastAPI now fails startup when hardened envs run without `VAULT_VERIFY_ENABLED=true` + Vault config (`app/core/config.py`, `main.py`), the Starter CLI refuses dev-local fallbacks outside local profiles, docs/env templates updated, and CLI tests cover the new guard. |
| OPS-003 | Third-party env parity (Stripe/Resend/Tavily) | Billing/email/search features only log warnings when provider keys or plan maps are missing. | Completed | *@codex* | `app/core/provider_validation.py` drives fast-fail checks for Stripe/Resend/Tavily, FastAPI lifespan now enforces them, `initialize_tools()` disables Tavily without a key, CLI exposes `providers validate` (+ `just validate-providers`), and docs live in `docs/ops/provider-parity.md` / `docs/trackers/OPS-003_THIRD_PARTY_ENV_PARITY.md`. |
| INFRA-004 | Production-grade Redis | Rate limiting, billing streams, lockout counters, and nonce stores all share a single unauthenticated Redis URL. | Completed | *@codex* | Nov 16 2025 — introduced `RATE_LIMIT_REDIS_URL`, `AUTH_CACHE_REDIS_URL`, `SECURITY_TOKEN_REDIS_URL`, the Redis client factory, hardened TLS/auth checks, CLI/env docs, and rewired all consumers (see `docs/trackers/complete/MILESTONE_INFRA_REDIS_ISOLATION.md`). |
| DB-007 | Release playbook for migrations & plan seeding | `auto_run_migrations` is disabled in prod, but there’s no documented CI/CD step to run Alembic + seed billing plans. | Resolved | *@codex* | `python -m starter_cli.app release db` now runs `just migrate`, captures Alembic head, embeds the Stripe provisioning flow, verifies `billing_plans`, and writes `var/reports/db-release-*.json` summaries (`starter_cli/commands/release.py`, wired in `starter_cli/app.py`). The runbook (`docs/ops/db-release-playbook.md`) documents the command, flags, and artifact expectations; milestone notes updated under `docs/trackers/complete/MILESTONE_DB_RELEASE_AUTOMATION.md`. |
| BE-012 | Tenant attribution for conversations | When metadata omits `tenant_id`, persistence falls back to a shared “default” tenant, risking cross-tenant leakage. | Completed | *@codex* | Chat + conversation routers now require tenant context headers/JWT, repositories/services mandate `tenant_id`, rate limits scope by tenant, and Starter CLI docs/wizard instruct operators on capturing tenant UUIDs (see `docs/trackers/complete/BE-012.md`). |
| OBS-006 | Centralized structured logging | Request/Stripe/auth events log locally but there’s no sink or JSON formatter for correlation IDs, rate-limit hits, etc. | Resolved | *@codex* | JSON formatter + sink factory now lives in `app/observability/logging.py`, FastAPI/worker boot calls `configure_logging()`, request middleware seeds correlation IDs, and Datadog/OTLP sinks are documented in `docs/architecture/structured-logging.md`. |
| AUTH-011 | Public signup policy & throttling review | Default posture must be invite/approval with matching operator workflows. | Completed | *@codex* | Phases 1–3 delivered (Nov 16, 2025): invite/request flows, multi-bucket signup quotas, honeypot/UA fingerprints, Prometheus metrics, and CLI prompts now ship with the starter. |
| OBS-007 | GeoIP + session telemetry | Session records include GeoIP fields but the service is a no-op, so device history shows “unknown”. | Resolved | *@codex* | IPinfo/IP2Location SaaS adapters plus MaxMind/IP2Location DB readers now power `GeoIPService`; settings + CLI wizard capture provider secrets/paths (with MaxMind download automation), `SessionStore` persists locations, and the runbook lives under `docs/observability/geoip.md`. |
| OPS-004 | Stripe retry worker scaling | Each FastAPI pod can still run the retry worker when `ENABLE_BILLING_RETRY_WORKER=true`, complicating horizontal scaling. | Resolved | *@codex* | Starter CLI now captures the deployment mode, disables the worker on multi-replica API pods, and emits `var/reports/billing-worker-topology.md` + `billing-worker.env` so only one worker pod runs with the flags enabled; runbook updated. |

## Frontend Issue Tracker

| ID | Title | Description | Status | Owner | Notes |
|----|-------|-------------|--------|-------|-------|
| FE-010 | Account profile editing scope | `/account/profile` remains read-only for UI Foundation; “Edit profile” button stays disabled until Account Editing epic enables mutations. | Decision logged | *@codex* | Choice recorded 11 Nov 2025; spec in `docs/frontend/features/account-profile.md` §7 tracks follow-up when backend mutations exist. |
| FE-011 | Tenant metadata source of truth | Account profile pulls tenant plan/seats/timestamps from `/api/billing/tenants/:id` after hydrating `/api/auth/session`, keeping billing as authoritative. | Decision logged | *@codex* | `useAccountProfileQuery` will fan out to billing and memoize via TanStack to avoid duplicate calls. |
| FE-012 | Usage visualization scope | Profile view sticks to textual `KeyValueList` summaries and deep-links to `/billing` for charts to avoid duplicating analytics surfaces. | Decision logged | *@codex* | Billing route remains the only place for usage graphs until design approves embedded micro-charts. |
| FE-013 | Session telemetry surface | Profile “Recent activity” shows only last-login timestamp from sessions API and points to `/account/sessions` for detailed device/IP data. | Decision logged | *@codex* | Drawer copy documents future enhancement once the sessions endpoint exposes richer metadata. |
| FE-014 | Security page scope | Security view reuses backend password policy errors (no client zxcvbn), keeps “recent activity” lightweight, leaves logout-all on Sessions, and links MFA CTA to repo docs. | Decision logged | *@codex* | Logged 11 Nov 2025; see `docs/frontend/features/account-security.md` §7 for follow-up when MFA backend ships.
| FE-015 | Sessions page scope | Sessions table ships without filters, hides revoked entries, skips single-row confirmations, and surfaces logout-all revoke counts via toasts. | Decision logged | *@codex* | Documented 11 Nov 2025 in `docs/frontend/features/account-sessions.md` §7; revisit once backend adds filtering/audit toggles. |
| FE-016 | Service accounts scope | Reintroduce the Automation tab with token listing + revoke UX while issuance remains CLI-only until Vault-backed flows can run in-browser. | Completed | *@codex* | Automation tab now issues tokens in browser mode and surfaces Vault-signed issuance via `/api/auth/service-accounts/issue`; helper tests + UI plumbing shipped Nov 16 2025. |
| FE-101 | Vault-signed service-account issuance missing | Frontend/server services only call the browser bridge, leaving the `issue_service_account_token` endpoint unused so operators cannot mint Vault-signed tokens. | Resolved | *@codex* | Added `issueVaultServiceAccountToken` helper, `/app/api/auth/service-accounts/issue` proxy, Automation tab toggle, and docs covering the Vault header workflow. |
| FE-102 | Billing subscription hooks import server modules | `lib/queries/billingSubscriptions.ts` imports `'use server'` helpers directly, so any client component crashes at build time and bypasses auth headers. | Resolved | *@codex* | Added `lib/api/billingSubscriptions.ts`, refactored the hooks to use those fetchers, and documented the server-vs-client boundary in `docs/frontend/data-access.md`. |
| FE-103 | Duplicate realtime/session hooks | Legacy `hooks/useBillingStream.ts` and `hooks/useSilentRefresh.ts` drift from the canonical implementations under `lib/queries/`, risking inconsistent fixes. | Resolved | *@codex* | Removed the unused hooks and updated `docs/frontend/data-access.md` to state that `lib/queries/*` exports are the single source of truth. |
| FE-104 | Session list lacks tenant filter | `/api/auth/sessions` supports `tenant_id`, but `fetchUserSessions` never forwards it, so the UI cannot scope audits per tenant. | Resolved | *@codex* | Fetch helpers + TanStack hooks now accept `tenantId`, the Sessions panel exposes a filter (all/current/custom), and regression tests cover the query key behavior. |
| FE-105 | Admin password reset surface | FastAPI exposes `adminResetPasswordApiV1AuthPasswordResetPost`, but the frontend lacks services/API route/UI to trigger scoped admin resets with audit-friendly copy. | Completed | *@codex* | Added scope-guarded `/app/api/auth/password/admin-reset`, React Query mutation + API tests, and an Account → Security operator dialog (support:read only) with policy copy + session revocation messaging. Deprecated placeholder `/api/auth/password/reset` was removed before launch. |
| FE-106 | Status operator console | Operator endpoints (`listStatusSubscriptions`, `resendStatusIncident`) are wrapped in server services but unused; no UI exists to review subscriptions or re-dispatch incidents. | Planned | *@codex* | Add admin-only API routes + queries and a small Ops/Status page with table + resend action; include toast/error states and regression tests. |
| FE-107 | Billing client regen guard | HeyAPI generation drops billing methods when `ENABLE_BILLING=false`, breaking imports; UI also renders billing pages unconditionally. | Planned | *@codex* | Short term: always regenerate client with billing enabled; follow-up: add feature-flag guards around billing imports/routes or move billing SDK imports behind dynamic loaders to allow billing-off builds. |
