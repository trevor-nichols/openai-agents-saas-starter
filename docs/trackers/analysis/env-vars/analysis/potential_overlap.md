| Variable | Purpose | Locations | Overlap? | Verdict |
| --- | --- | --- | --- | --- |
| `ACTIVITY_EVENTS_REDIS_URL` | Redis URL for activity event streaming (defaults to `REDIS_URL`) | `app/core/settings/activity.py` | Yes — Redis URL overrides | Optional override that defaults to REDIS_URL; only keep in env files if you need separate Redis instances per subsystem. |
| `AGENT_API_MOCK` | Use mock API responses in Next.js. / Server-side flag to enable mock API mode. | `config.ts`<br>`src/starter_console/workflows/setup/_wizard/sections/frontend.py` | Yes — API mock flag | Server-side mock flag; consider consolidating with NEXT_PUBLIC_AGENT_API_MOCK so one flag drives both client+server. |
| `ALLOW_PUBLIC_SIGNUP` | Enable public registration (overridden by `SIGNUP_ACCESS_POLICY` logic) / Enable public self-registration. / … | `app/core/settings/signup.py`<br>`harness/env.ts` (buildRawEnv)<br>`smoke_http.sh`:15<br>`src/starter_console/workflows/setup/_wizard/sections/signup.py`<br>`unit/config/test_config.py` | Yes — Signup access | Legacy boolean; remove and map to SIGNUP_ACCESS_POLICY=public (or non-public). |
| `API_BASE_URL` | Base URL of the backend API. / Server-side fallback URL for the backend API. / … | `config.ts`<br>`src/starter_console/workflows/setup/_wizard/sections/core.py`<br>`src/starter_contracts/infra/terraform_spec/aws.py` (L59)<br>`azure.py` (L75)<br>`gcp.py` (L137) | Yes — Backend API base URL | Server-side alias for backend API URL; pick this or NEXT_PUBLIC_API_URL as the single source of truth and derive the other at build/run time. |
| `API_URL` | Fallback backend API URL used in test fixture routes if `NEXT_PUBLIC_API_URL` is missing. | `api/v1/test-fixtures/apply/route.ts`<br>`api/v1/test-fixtures/email-verification-token/route.ts` | Yes — Backend API base URL | Remove or keep as fallback alias; replace with NEXT_PUBLIC_API_URL or API_BASE_URL. |
| `APP_PUBLIC_URL` | Base URL for generating public links / Public base URL of the frontend application. / … | `app/core/settings/application.py`<br>`src/starter_console/workflows/setup/_wizard/sections/core.py`<br>`src/starter_contracts/infra/terraform_spec/aws.py` (L68)<br>`azure.py` (L83)<br>`gcp.py` (L145) | Yes — Public site URL | Canonical public frontend URL for backend/contracts; ensure NEXT_PUBLIC_SITE_URL matches; remove SITE_URL where possible. |
| `AUTH_CACHE_REDIS_URL` | Redis URL for auth caching (defaults to `REDIS_URL`) / Redis URL for auth/session caching. / … | `app/core/settings/redis.py`<br>`conftest.py`, `unit/config/test_config.py`<br>`smoke_http.sh`:11<br>`src/starter_console/workflows/setup/_wizard/sections/providers/redis.py` | Yes — Redis URL overrides | Optional override that defaults to REDIS_URL; only keep in env files if you need separate Redis instances per subsystem. |
| `AUTH_CLI_BASE_URL` | Auth service base URL for CLI operations. | `src/starter_console/services/auth/tokens.py` | Yes — Backend API base URL | Likely same target as API_BASE_URL; consider defaulting it to API_BASE_URL unless you truly have a separate auth base URL. |
| `AUTH_KEY_STORAGE_PROVIDER` | Provider for secret-manager key storage. / Specifies which provider is used for key storage. / … | `app/core/settings/security.py`<br>`src/starter_console/workflows/setup/_wizard/sections/core.py`<br>`src/starter_contracts/infra/terraform_spec/aws.py` (L88)<br>`azure.py` (L166)<br>`gcp.py` (L160)<br>`unit/config/test_config.py` | Yes — Auth key provider defaults | Defaults to SECRETS_PROVIDER in contracts; consider relying solely on SECRETS_PROVIDER unless you need this override. |
| `AUTH_SESSION_IP_HASH_SALT` | Salt for hashing session IP addresses. / Salt for session IP hashing (defaults to SECRET_KEY) | `app/core/settings/security.py`<br>`src/starter_console/workflows/setup/_wizard/sections/secrets.py` | Yes — Auth session IP salt vs SECRET_KEY | Optional override; defaults to SECRET_KEY — keep only if you need a distinct salt. |
| `AZURE_KEY_VAULT_NAME` | Azure Key Vault Name (legacy/fallback). | `src/starter_console/workflows/home/probes/secrets.py` | Yes — Azure Key Vault identifier | Legacy/fallback; remove and use AZURE_KEY_VAULT_URL (derive URL from name if needed). |
| `AZURE_KEY_VAULT_URL` | Azure Key Vault URL | `app/core/settings/providers.py`<br>`src/starter_console/workflows/secrets/providers/azure.py` | Yes — Azure Key Vault identifier | Canonical; keep. |
| `BACKEND_API_URL` | Fallback backend API URL used in test fixture routes if `API_URL` is missing. | `api/v1/test-fixtures/apply/route.ts`<br>`api/v1/test-fixtures/email-verification-token/route.ts` | Yes — Backend API base URL | Remove or keep as fallback alias; replace with NEXT_PUBLIC_API_URL or API_BASE_URL. |
| `BILLING_EVENTS_REDIS_URL` | Redis URL for billing event streams. / Redis URL for billing events (defaults to `REDIS_URL`) / … | `app/core/settings/database.py`<br>`src/starter_console/workflows/setup/_wizard/sections/providers/redis.py`<br>`unit/config/test_config.py` | Yes — Redis URL overrides | Optional override that defaults to REDIS_URL; only keep in env files if you need separate Redis instances per subsystem. |
| `CONSOLE_LOGGING_DATADOG_API_KEY` | Datadog API key for console logs. | `src/starter_console/observability/logging.py` | Yes — Datadog API key | Console-specific duplicate; consider reusing LOGGING_DATADOG_API_KEY (or OTEL_EXPORTER_DATADOG_API_KEY) instead. |
| `CONSOLE_LOGGING_DATADOG_SITE` | Datadog site for console logs. | `src/starter_console/observability/logging.py` | Yes — Datadog site | Console-specific duplicate; consider reusing LOGGING_DATADOG_SITE. |
| `CONSOLE_LOG_ROOT` | Root directory for console logs. | `src/starter_console/observability/logging.py` | Yes — Log root directory | Console-specific; consider defaulting to LOG_ROOT or dropping if you unify on LOG_ROOT. |
| `ENABLE_ANTHROPIC_API_KEY` | Enable Anthropic API key configuration. | `src/starter_console/workflows/setup/_wizard/sections/providers/ai.py` | Yes — AI key enable vs key | Setup-only enable flag; can be inferred from presence of ANTHROPIC_API_KEY — consider removing. |
| `ENABLE_BILLING` | Backend feature flag to enable/disable billing logic. / Enable billing features / … | `api/health/features/route.ts`<br>`app/core/settings/database.py`<br>`conftest.py`, `unit/config/test_provider_validation.py`<br>`export_openapi.py`:57<br>`smoke_http.sh`:13<br>`src/starter_console/workflows/setup/_wizard/sections/providers/billing.py`<br>`src/starter_contracts/provider_validation.py` (L98) | Yes — Billing feature flags | Backend/source-of-truth billing flag; keep. Consider having frontend read from /api/health/features so NEXT_PUBLIC_ENABLE_BILLING becomes unnecessary. |
| `ENABLE_RESEND_EMAIL_DELIVERY` | Toggles email delivery via Resend. | `smoke_http.sh`:15 | Yes — Resend enable flag | Rename/remove; use RESEND_EMAIL_ENABLED (even for smoke tests). |
| `GCP_SM_CACHE_TTL_SECONDS` | Cache TTL for GCP Secret Manager. | `src/starter_console/workflows/secrets/providers/gcp.py` | Yes — GCP Secret Manager naming | Prefer this prefix; keep as canonical for Secret Manager cache TTL. |
| `GCP_SM_PROJECT_ID` | GCP Project ID for Secret Manager. / GCP Project ID. / … | `src/starter_contracts/infra/terraform_spec/gcp.py` (L43)<br>`src/starter_providers/secrets/gcp_client.py`:108 (`_resolve_secret_name`)<br>`src/starter_console/workflows/secrets/providers/gcp.py`<br>`unit/integrations/providers/gcp/test_gcp_provider.py` | Yes — GCP Secret Manager naming | Prefer this prefix for Secret Manager; keep as canonical (or consolidate to a single GCP_PROJECT_ID across storage+secrets). |
| `GCP_SM_SIGNING_SECRET_NAME` | GCP Secret Manager secret name containing the signing secret. / Name of the signing secret in GCP Secret Manager. / … | `src/starter_contracts/infra/terraform_spec/gcp.py` (L176)<br>`unit/integrations/providers/gcp/test_gcp_provider.py` | Yes — GCP Secret Manager naming | Prefer this prefix; keep as canonical for Secret Manager signing secret pointer. |
| `GCS_PROJECT_ID` | GCP Project ID / GCS Project ID. / … | `app/core/settings/storage.py`<br>`src/starter_console/workflows/setup/_wizard/sections/storage.py`<br>`src/starter_contracts/infra/terraform_spec/gcp.py` (L43) | Yes — GCP Secret Manager naming | Overlaps with Secret Manager project ID in contracts and with GCS storage config; decide whether you want one GCP project ID variable or keep storage vs secret-manager separate. |
| `GCS_SM_CACHE_TTL_SECONDS` | Cache TTL for GCP Secret Manager | `app/core/settings/providers.py` | Yes — GCP Secret Manager naming | Remove/rename to GCP_SM_CACHE_TTL_SECONDS (misleading prefix). |
| `GCS_SM_PROJECT_ID` | GCP Project ID for Secret Manager | `app/core/settings/providers.py` | Yes — GCP Secret Manager naming | Remove/rename to GCP_SM_PROJECT_ID (misleading prefix). |
| `GCS_SM_SIGNING_SECRET_NAME` | Name of signing secret in GCP Secret Manager | `app/core/settings/providers.py` | Yes — GCP Secret Manager naming | Remove/rename to GCP_SM_SIGNING_SECRET_NAME (misleading prefix). |
| `LOG_ROOT` | Base directory for logs / Defines the root directory where dated log files are written. / … | `app/core/settings/observability.py`<br>`src/starter_console/services/infra/ops_models.py`<br>`unit/observability/test_logging.py`<br>`with-log-root.js` (Line 25) | Yes — Log root directory | Shared log root used across components; prefer this as canonical and consider deprecating CONSOLE_LOG_ROOT if possible. |
| `LOGGING_DATADOG_API_KEY` | Datadog API key / Datadog API key for log ingestion. / … | `app/core/settings/observability.py`<br>`src/starter_console/workflows/setup/_wizard/sections/observability.py`<br>`src/starter_contracts/observability/logging/sinks/datadog.py` (L53)<br>`unit/observability/test_logging.py` | Yes — Datadog API key | Potentially same secret as OTEL_EXPORTER_DATADOG_API_KEY/CONSOLE_LOGGING_DATADOG_API_KEY; standardize on one (often LOGGING_DATADOG_API_KEY) and reuse across components. |
| `LOGGING_DATADOG_SITE` | Datadog site / Datadog site for logs. | `app/core/settings/observability.py`<br>`src/starter_console/workflows/setup/_wizard/sections/observability.py` | Yes — Datadog site | Standardize with OTEL_EXPORTER_DATADOG_SITE/CONSOLE_LOGGING_DATADOG_SITE (likely same value). |
| `NEXT_PUBLIC_AGENT_API_MOCK` | Client-side flag to enable mock API mode. | `config.ts` | Yes — API mock flag | Preferred single mock flag for client+server (safe to expose); consider using this everywhere and deprecating AGENT_API_MOCK. |
| `NEXT_PUBLIC_ALLOW_PUBLIC_SIGNUP` | Tertiary fallback for enabling public signup tests. | `harness/env.ts` (buildRawEnv) | Yes — Signup access | Test-only duplicate; prefer PLAYWRIGHT_ALLOW_PUBLIC_SIGNUP or SIGNUP_ACCESS_POLICY. |
| `NEXT_PUBLIC_API_URL` | API base URL for frontend. / Base API URL for manual tests. / … | `api/v1/test-fixtures/apply/route.ts`<br>`api/v1/test-fixtures/email-verification-token/route.ts`<br>`config.ts`<br>`manual/test_code_interpreter_manual.py`<br>`src/starter_console/workflows/setup/_wizard/sections/frontend.py`<br>`test-seed.js` (Line 99) | Yes — Backend API base URL | Prefer as canonical API URL for web-app; remove API_URL/BACKEND_API_URL; allow PLAYWRIGHT_API_URL/SMOKE_BASE_URL as test-only overrides. |
| `NEXT_PUBLIC_ENABLE_BILLING` | Enable billing features in frontend. / Feature flag to enable/disable billing-related UI and queries. / … | `api/health/features/route.ts`<br>`config/features.ts`<br>`(app)/__tests__/layout.test.ts` (test)<br>`src/starter_console/workflows/setup/_wizard/sections/providers/billing.py` | Yes — Billing feature flags | Duplicates backend billing state for UI; consider deprecating if UI can rely on backend feature discovery. |
| `NEXT_PUBLIC_SITE_URL` | Base URL of the deployed application. | `seo/siteUrl.ts` | Yes — Public site URL | Frontend-exposed site URL; should match APP_PUBLIC_URL; prefer over SITE_URL in web-app. |
| `NEXT_PUBLIC_VERCEL_URL` | Automatically set by Vercel; used as a fallback for site URL. | `seo/siteUrl.ts` | Yes — Public site URL | Vercel-provided fallback; keep as fallback only (don’t hand-set if you can avoid it). |
| `OTEL_EXPORTER_DATADOG_API_KEY` | Datadog API key for OTel exporter. | `src/starter_console/workflows/setup/_wizard/sections/observability.py` | Yes — Datadog API key | Potential duplicate of LOGGING_DATADOG_API_KEY; if you standardize on direct OTLP exporter, keep this and drop the others; otherwise reuse LOGGING_DATADOG_API_KEY. |
| `OTEL_EXPORTER_DATADOG_SITE` | Datadog site for OTel exporter. | `src/starter_console/workflows/setup/_wizard/sections/observability.py` | Yes — Datadog site | Likely same as LOGGING_DATADOG_SITE; standardize naming/value. |
| `PLAYWRIGHT_ALLOW_PUBLIC_SIGNUP` | Primary flag to enable tests involving public signup flows. | `harness/env.ts` (buildRawEnv) | Yes — Signup access | Test-only duplicate; prefer driving tests from SIGNUP_ACCESS_POLICY or keep a single PLAYWRIGHT_* switch. |
| `PLAYWRIGHT_API_URL` | Primary override for the backend API URL when running seed fixtures. / The base URL for the backend API used during tests. | `harness/env.ts` (buildRawEnv)<br>`test-seed.js` (Line 98) | Yes — Backend API base URL | Keep as test override; default/fallback should resolve to NEXT_PUBLIC_API_URL/API_BASE_URL. |
| `RATE_LIMIT_REDIS_URL` | Redis connection string for rate limiting. / Redis URL for rate limiting (defaults to `REDIS_URL`) / … | `app/core/settings/redis.py`<br>`conftest.py`, `unit/config/test_config.py`<br>`smoke_http.sh`:10<br>`src/starter_console/workflows/home/probes/redis.py` | Yes — Redis URL overrides | Optional override that defaults to REDIS_URL; only keep in env files if you need separate Redis instances per subsystem. |
| `REDIS_URL` | Connection string for Redis. / Primary Redis connection string. / … | `app/core/settings/redis.py`<br>`conftest.py`<br>`smoke_http.sh`:9<br>`src/starter_console/workflows/home/probes/redis.py`<br>`src/starter_contracts/infra/terraform_spec/common.py` (L96, L107) | Yes — Redis URL overrides | Canonical Redis URL; keep. |
| `SECRET_KEY` | Flask/FastAPI session secret key (legacy support). / Main application secret key. / … | `app/core/settings/security.py`<br>`src/starter_console/workflows/setup/_wizard/sections/secrets.py`<br>`unit/config/test_secret_guard.py` | Yes — Auth session IP salt vs SECRET_KEY | Canonical application secret; keep. |
| `SECURITY_TOKEN_REDIS_URL` | Redis URL for security token storage (nonces, etc). / Redis URL for security tokens (defaults to `REDIS_URL`) / … | `app/core/settings/redis.py`<br>`conftest.py`, `unit/config/test_config.py`<br>`smoke_http.sh`:12<br>`src/starter_console/workflows/setup/_wizard/sections/providers/redis.py` | Yes — Redis URL overrides | Optional override that defaults to REDIS_URL; only keep in env files if you need separate Redis instances per subsystem. |
| `SIGNUP_ACCESS_POLICY` | Controls user registration (`public`, `invite_only`, `approval`). / Signup access policy (`public`, `invite_only`, `approval`). / … | `app/core/settings/signup.py`<br>`contract/test_auth_signup_register.py`<br>`src/starter_console/workflows/setup/_wizard/sections/signup.py`<br>`unit/config/test_config.py` | Yes — Signup access | Canonical signup control; keep. |
| `STATUS_API_BASE_URL` | Base URL for Status API. | `src/starter_console/services/auth/status_ops.py` | Yes — Backend API base URL | Likely same target as API_BASE_URL; consider defaulting it to API_BASE_URL unless you truly have a separate status API base URL. |
| `USAGE_GUARDRAIL_REDIS_URL` | Redis URL for usage counters/guardrails. / Redis URL for usage guardrails (defaults to `REDIS_URL`) / … | `app/core/settings/redis.py`<br>`conftest.py`, `utils/contract_env.py`<br>`smoke_http.sh`:13<br>`src/starter_console/workflows/setup/_wizard/sections/usage.py` | Yes — Redis URL overrides | Optional override that defaults to REDIS_URL; only keep in env files if you need separate Redis instances per subsystem. |
