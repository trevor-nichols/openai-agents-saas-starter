# Coverage Matrix ‚Äî OpenAI Responses Streaming Events

Legend for **Status**: ‚úÖ Implemented (golden-covered) ¬∑ üü® Implemented (missing golden) ¬∑ ‚¨ú Planned ¬∑ ‚õî Ignored

Legend for **Mode** (suggested): `prod` ¬∑ `debug` ¬∑ `prod+debug`
Legend for **Used?** (suggested): `yes` ¬∑ `partial` ¬∑ `no` ¬∑ `tbd`

**Definitions**
- **Used? = yes** ‚Üí Impacts the public output *or* internal projection state used to compute public output (even if buffered / not emitted directly).
- **Used? = partial** ‚Üí Supported only in some flows, or only a subset is surfaced (e.g., only some run-item names are projected).
- **Used? = no** ‚Üí Ignored completely (no effect on public output or derived state).
- **Status ‚úÖ** ‚Üí Implemented and exercised by at least one contract fixture (`docs/contracts/public-sse-streaming/examples/*.ndjson`).
- **Status üü®** ‚Üí Implemented but not currently exercised by a contract fixture (or not yet validated end-to-end).

**API-service implementation notes (used when filling the matrix)**
- Inbound: OpenAI Agents SDK stream events are normalized into `AgentStreamEvent` (`apps/api-service/src/app/domain/ai/models.py`) by `OpenAIStreamingHandle` (`apps/api-service/src/app/infrastructure/providers/openai/streaming.py`).
- Outbound: the API service emits a stable public SSE contract `PublicSseEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`, `schema=public_sse_v1`) projected by `PublicStreamProjector` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/projector.py`).
- Streams: `apps/api-service/src/app/api/v1/chat/router.py` (`POST /api/v1/chat/stream`) and `apps/api-service/src/app/api/v1/workflows/router.py` (`POST /api/v1/workflows/{workflow_key}/run-stream`).
- Contract fixtures: `docs/contracts/public-sse-streaming/examples/*.ndjson` validated by `apps/api-service/tests/contract/streams/test_stream_goldens.py`.

---

# Raw protocol coverage (Responses API)

## Lifecycle (01-lifecycle.md) ‚Äî Tracker Template

| Event type             | Correlation keys | What the event represents (from docs)                       | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| ---------------------- | ---------------- | ----------------------------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.created`     | `response.id`    | A response object was created (initial metadata + status).  | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `LifecycleEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_lifecycle` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-web-search.ndjson` | ‚úÖ      | `response.created` is collapsed into `lifecycle.status=in_progress` (we do not expose a distinct ‚Äúcreated‚Äù state). |
| `response.queued`      | `response.id`    | Response is queued (waiting to be processed).               | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `LifecycleEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_lifecycle` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported (`lifecycle.status=queued`), but not currently represented in contract fixtures. |
| `response.in_progress` | `response.id`    | Response is in progress.                                    | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `LifecycleEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_lifecycle` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-web-search.ndjson` | ‚úÖ      | Early lifecycle events may have `response_id=null` until the provider returns it; consumers should key primarily by `stream_id` + `event_id`. |
| `response.completed`   | `response.id`    | Response completed successfully (final response payload).   | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `LifecycleEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_lifecycle` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Completion is primarily surfaced via the terminal `final` event; lifecycle `completed` is supported but not asserted by current fixtures. |
| `response.failed`      | `response.id`    | Response failed (response includes `error`).                | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `LifecycleEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_lifecycle` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Failure is surfaced via the terminal `error` event (provider/server) and/or `final.final.status=failed`; raw `response.failed` lifecycle is supported but not currently fixture-covered. |
| `response.incomplete`  | `response.id`    | Response finished incomplete (`incomplete_details.reason`). | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `LifecycleEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_lifecycle` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Incomplete runs are primarily surfaced via `final.final.status=incomplete`; raw `response.incomplete` lifecycle is supported but not currently fixture-covered. |

---

## Output content (02-output-content.md) ‚Äî Tracker Template

| Event type                              | Correlation keys                                               | What the event represents (from docs)                      | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| --------------------------------------- | -------------------------------------------------------------- | ---------------------------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.output_item.added`            | `output_index`, `item.id`                                      | A new output item was added to the response output array.  | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `OutputItemAddedEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_output_items` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-function-tool.ndjson` | ‚úÖ      | Establishes stable slots for UI ordering by `output_index`; also seeds internal tool state (tool type/name/server label) for later tool events. |
| `response.output_item.done`             | `output_index`, `item.id`                                      | An output item was marked done (completed).                | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `OutputItemDoneEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_output_items` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-function-tool.ndjson` | ‚úÖ      | Often the point where tool call details (args/results) become complete; we merge `event.tool_call` into state and may emit a richer `tool.status`. |
| `response.content_part.added`           | `item_id`, `output_index`, `content_index`                     | A new content part was added to an output item.            | no    | ‚Äî    | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored: we render message streaming off `response.output_text.delta` (patch by `output_index` + `item_id` + `content_index`). |
| `response.content_part.done`            | `item_id`, `output_index`, `content_index`                     | A content part was marked done (finalized).                | no    | ‚Äî    | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored: the transcript is finalized by `output_text.delta` accumulation plus the terminal `final` event payload. |
| `response.output_text.delta`            | `item_id`, `output_index`, `content_index`                     | A text delta was produced for an output_text content part. | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `MessageDeltaEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_message_deltas` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-function-tool.ndjson` | ‚úÖ      | UI must treat this as an ‚Äúupdate-in-place‚Äù event (do not append); ordering should be by `output_index`, not arrival time (see `00-intro.md`). |
| `response.output_text.done`             | `item_id`, `output_index`, `content_index`                     | Final text for the output_text content part.               | no    | ‚Äî    | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored: we rely on deltas for incremental UX and the terminal `final.final.response_text` for the durable final string. |
| `response.refusal.delta`                | `item_id`, `output_index`, `content_index`                     | A partial refusal text delta was produced.                 | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `RefusalDeltaEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_refusal` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-refusal.ndjson` | ‚úÖ      | Refusal text is accumulated and also echoed into `final.final.refusal_text`. |
| `response.refusal.done`                 | `item_id`, `output_index`, `content_index`                     | Final refusal text was produced.                           | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `RefusalDoneEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_refusal` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-refusal.ndjson` | ‚úÖ      | A `final` event is still emitted at stream end with `final.final.status=refused`. |
| `response.output_text.annotation.added` | `item_id`, `output_index`, `content_index`, `annotation_index` | An annotation was added to output text content.            | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `MessageCitationEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_citations` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-web-search.ndjson` | ‚úÖ      | We project only supported citation types (url_citation, file_citation, container_file_citation). For web search, citations may trigger an updated `tool.status` with refreshed `sources`. |

---

## Function calls (03-function-calls.md) ‚Äî Tracker Template

| Event type                               | Correlation keys          | What the event represents (from docs)          | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| ---------------------------------------- | ------------------------- | ---------------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.function_call_arguments.delta` | `item_id`, `output_index` | Partial function-call arguments delta.         | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | buffered (no direct public event) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_arguments` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-function-tool.ndjson` | ‚úÖ      | Provider deltas are buffered to avoid partial JSON + ordering issues; we emit synthesized `tool.arguments.delta` chunks + `tool.arguments.done` only once `.done` arrives. |
| `response.function_call_arguments.done`  | `item_id`, `output_index` | Final function-call arguments + function name. | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolArgumentsDeltaEvent`, `ToolArgumentsDoneEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_arguments` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-function-tool.ndjson` | ‚úÖ      | Arguments are sanitized + truncated; `arguments_json` is best-effort parsed. We may emit an initial `tool.status` (function in_progress) if the Agents SDK‚Äôs `tool_called` event is delayed/missing. |
| `response.custom_tool_call_input.delta`  | `item_id`, `output_index` | Partial update to input of a custom tool call. | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | buffered (no direct public event) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_arguments` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported via the same buffering path as function-call args; not currently exercised by contract fixtures. |
| `response.custom_tool_call_input.done`   | `item_id`, `output_index` | Final input for a custom tool call.            | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolArgumentsDeltaEvent`, `ToolArgumentsDoneEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_arguments` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Projected as `tool_type=function` (custom tools are treated like function tools in the public stream today). |

---

## Built-in tools (04-builtin-tools.md) ‚Äî Tracker Template

### File search

| Event type                              | Correlation keys          | What the event represents (from docs) | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| --------------------------------------- | ------------------------- | ------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.file_search_call.in_progress` | `item_id`, `output_index` | File search call initiated.           | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`FileSearchTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported; fixtures currently assert only terminal `completed` state. |
| `response.file_search_call.searching`   | `item_id`, `output_index` | File search is actively searching.    | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`FileSearchTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported (`tool.status.tool.status=searching`), but not currently fixture-covered. |
| `response.file_search_call.completed`   | `item_id`, `output_index` | File search call completed.           | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`FileSearchTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_call_updates` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-file-search.ndjson` | ‚úÖ      | Queries + results are extracted when available (often at `response.output_item.done`), sanitized, and truncated for safety. |

### Web search

| Event type                             | Correlation keys          | What the event represents (from docs) | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| -------------------------------------- | ------------------------- | ------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.web_search_call.in_progress` | `item_id`, `output_index` | Web search call initiated.            | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`WebSearchTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported; fixtures currently assert only terminal `completed` state. |
| `response.web_search_call.searching`   | `item_id`, `output_index` | Web search is executing.              | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`WebSearchTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported (`tool.status.tool.status=searching`), but not currently fixture-covered. |
| `response.web_search_call.completed`   | `item_id`, `output_index` | Web search call completed.            | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`WebSearchTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_call_updates` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-web-search.ndjson` | ‚úÖ      | Sources may be populated from tool outputs and/or `response.output_text.annotation.added` citations; projector may emit a follow-up `tool.status` to refresh `sources`. |

### Image generation

| Event type                                     | Correlation keys                                 | What the event represents (from docs)               | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| ---------------------------------------------- | ------------------------------------------------ | --------------------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.image_generation_call.in_progress`   | `item_id`, `output_index`                        | Image generation call is in progress.               | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`ImageGenerationTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported; fixtures cover `partial_image` and `completed` states. |
| `response.image_generation_call.generating`    | `item_id`, `output_index`                        | Image generation is actively generating.            | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`ImageGenerationTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported (`tool.status.tool.status=generating`), but not currently fixture-covered. |
| `response.image_generation_call.partial_image` | `item_id`, `output_index`, `partial_image_index` | Partial image available during generation (base64). | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent`, `ChunkDeltaEvent`, `ChunkDoneEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-image-generation-partials.ndjson` | ‚úÖ      | Partial image bytes are streamed via chunked base64 (`chunk.delta` / `chunk.done`) targeting `partial_image_b64` so large payloads don‚Äôt exceed SSE frame limits. |
| `response.image_generation_call.completed`     | `item_id`, `output_index`                        | Image generation completed; final image available.  | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`ImageGenerationTool`), `FinalEvent` (attachments) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_call_updates` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-image-generation-partials.ndjson` | ‚úÖ      | Final image bytes are stored as an attachment; `tool.status` does not embed the full base64 payload. |

### Code interpreter

| Event type                                    | Correlation keys          | What the event represents (from docs)              | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| --------------------------------------------- | ------------------------- | -------------------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.code_interpreter_call.in_progress`  | `item_id`, `output_index` | Code interpreter call is in progress.              | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`CodeInterpreterTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported; fixtures currently assert only terminal `completed` state. |
| `response.code_interpreter_call.interpreting` | `item_id`, `output_index` | Code interpreter is actively interpreting.         | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`CodeInterpreterTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported (`tool.status.tool.status=interpreting`), but not currently fixture-covered. |
| `response.code_interpreter_call.completed`    | `item_id`, `output_index` | Code interpreter call completed.                   | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`CodeInterpreterTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_call_updates` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-code-interpreter.ndjson` | ‚úÖ      | Container metadata (`container_id`, `container_mode`) is surfaced when available; stdout/files are handled separately (attachments/download endpoints). |
| `response.code_interpreter_call_code.delta`   | `item_id`, `output_index` | Partial code snippet streamed by code interpreter. | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolCodeDeltaEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_code_interpreter_code` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported (`tool.code.delta`) but not currently exercised by contract fixtures. |
| `response.code_interpreter_call_code.done`    | `item_id`, `output_index` | Final code snippet for the code interpreter.       | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolCodeDoneEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_code_interpreter_code` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-code-interpreter.ndjson` | ‚úÖ      | Used for showing the executed code block in debug tooling and/or a ‚Äúcode card‚Äù UI. |

---

## MCP tools (05-mcp-tools.md) ‚Äî Tracker Template

| Event type                            | Correlation keys          | What the event represents (from docs)    | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| ------------------------------------- | ------------------------- | ---------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.mcp_call_arguments.delta`   | `item_id`, `output_index` | Delta to MCP tool call arguments.        | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | buffered (no direct public event) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_arguments` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-mcp-tool.ndjson` | ‚úÖ      | Provider deltas are buffered; we emit synthesized `tool.arguments.delta` chunks + `tool.arguments.done` only once `.done` arrives. |
| `response.mcp_call_arguments.done`    | `item_id`, `output_index` | Final MCP tool call arguments.           | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolArgumentsDeltaEvent`, `ToolArgumentsDoneEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_arguments` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-mcp-tool.ndjson` | ‚úÖ      | Arguments are sanitized + truncated; `arguments_json` is best-effort parsed. Tool identity comes from `output_item.*` metadata when present. |
| `response.mcp_call.in_progress`       | `item_id`, `output_index` | MCP tool call in progress.               | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`McpTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-mcp-tool.ndjson` | ‚úÖ      | We also surface `awaiting_approval` via the Agents SDK `mcp_approval_requested` run-item event (see 08-agents section). |
| `response.mcp_call.completed`         | `item_id`, `output_index` | MCP tool call completed successfully.    | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`McpTool`), `ToolOutputEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` + `run_items.project_event` | `docs/contracts/public-sse-streaming/examples/chat-mcp-tool.ndjson` | ‚úÖ      | Tool outputs for MCP are sanitized and emitted via `tool.output` (function/mcp only). |
| `response.mcp_call.failed`            | `item_id`, `output_index` | MCP tool call failed.                    | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`McpTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_tool_status_raw` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | ‚Äî                   | üü®      | Supported (`tool.status.tool.status=failed`), but not currently fixture-covered. |
| `response.mcp_list_tools.in_progress` | `item_id`, `output_index` | Listing available MCP tools in progress. | no    | ‚Äî    | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Not surfaced in the public stream today (would require a new public event kind or debug-only channel). |
| `response.mcp_list_tools.completed`   | `item_id`, `output_index` | Listing available MCP tools completed.   | no    | ‚Äî    | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Not surfaced in the public stream today (would require a new public event kind or debug-only channel). |
| `response.mcp_list_tools.failed`      | `item_id`, `output_index` | Listing available MCP tools failed.      | no    | ‚Äî    | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Not surfaced in the public stream today (would require a new public event kind or debug-only channel). |

---

## Reasoning (06-reasoning.md) ‚Äî Tracker Template

| Event type                              | Correlation keys                           | What the event represents (from docs)   | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| --------------------------------------- | ------------------------------------------ | --------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `response.reasoning_summary_part.added` | `item_id`, `output_index`, `summary_index` | A reasoning summary part was added.     | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ReasoningSummaryPartAddedEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_reasoning_summary` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-reasoning-summary.ndjson` | ‚úÖ      | Projected as `kind=reasoning_summary.part.added` (chunk boundary); `text` is often empty at start. |
| `response.reasoning_summary_part.done`  | `item_id`, `output_index`, `summary_index` | A reasoning summary part was completed. | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ReasoningSummaryPartDoneEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_reasoning_summary` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-reasoning-summary.ndjson` | ‚úÖ      | Projected as `kind=reasoning_summary.part.done` (chunk boundary) with final part text. |
| `response.reasoning_summary_text.delta` | `item_id`, `output_index`, `summary_index` | Delta to reasoning summary text.        | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ReasoningSummaryDeltaEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_reasoning_summary` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-reasoning-summary.ndjson` | ‚úÖ      | Projected as `kind=reasoning_summary.delta` (summary text is accumulated and echoed into `final.final.reasoning_summary_text`). |
| `response.reasoning_summary_text.done`  | `item_id`, `output_index`, `summary_index` | Final reasoning summary text.           | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ReasoningSummaryDeltaEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_reasoning_summary` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/raw.py`) | `docs/contracts/public-sse-streaming/examples/chat-reasoning-summary.ndjson` | ‚úÖ      | If `.done.text` contains additional suffix beyond accumulated deltas, we emit a final `reasoning_summary.delta` for the suffix. |
| `response.reasoning_text.delta`         | `item_id`, `output_index`, `content_index` | Delta to reasoning text.                | no    | ‚Äî    | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored: we do not stream full reasoning text to clients (summary-only policy). |
| `response.reasoning_text.done`          | `item_id`, `output_index`, `content_index` | Final reasoning text.                   | no    | ‚Äî    | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored: we do not stream full reasoning text to clients (summary-only policy). |

---

## Errors (07-errors.md) ‚Äî Tracker Template

| Event type | Correlation keys | What the event represents (from docs)   | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes |
| ---------- | ---------------- | --------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ----- |
| `error`    | (stream/session) | An error occurred (code/message/param). | yes   | prod | `AgentStreamEvent` `raw_response_event` and `error` (`apps/api-service/src/app/domain/ai/models.py`) | `ErrorEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `raw._project_terminal_errors` and `PublicStreamProjector.project_error` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/projector.py`) | `docs/contracts/public-sse-streaming/examples/chat-provider-error.ndjson` | ‚úÖ      | Provider errors (`raw_type=error`) and server exceptions are normalized into a single terminal `kind=error` event; stream stops emitting after terminal events. |

---

# Agent-level abstraction coverage (Agents SDK)

## 08-agents.md ‚Äî Tracker Template

### StreamEvent variants (envelope-level)

| Event type/name           | Correlation keys               | What the event represents (from your Agents SDK doc)                                                                                  | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes                                                                                                                          |
| ------------------------- | ------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------ |
| `raw_response_event`      | (wrapped) `data.*`             | Wrapper around a raw Responses streaming event (`data: TResponseStreamEvent`).                                                        | yes   | prod | `AgentStreamEvent` `raw_response_event` (`apps/api-service/src/app/domain/ai/models.py`) | projected (see 01‚Äì07 tables) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `OpenAIStreamingHandle._map_raw_response_event` (`apps/api-service/src/app/infrastructure/providers/openai/streaming.py`) + `PublicStreamProjector.project` | `docs/contracts/public-sse-streaming/examples/chat-web-search.ndjson` | ‚úÖ      | Raw provider events are **not** forwarded verbatim; they are projected into `public_sse_v1` for a stable FE contract. |
| `RunItemStreamEvent`      | (from `item: RunItem`)         | Higher-level events produced by the agent as it processes LLM output (messages, tool calls, tool outputs, handoffs, approvals, etc.). | partial | prod | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | subset projected (`tool.status`, `tool.output`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `OpenAIStreamingHandle._map_run_item_event` (`apps/api-service/src/app/infrastructure/providers/openai/streaming.py`) + `public_stream_projector/run_items.py` | `docs/contracts/public-sse-streaming/examples/chat-function-tool.ndjson` | ‚úÖ      | Only a subset of run-item names are projected today (see table below); the rest are ignored to keep the public stream minimal and stable. |
| `AgentUpdatedStreamEvent` | (from `new_agent: Agent[Any]`) | Notifies that there is a new agent running.                                                                                           | yes   | prod | `AgentStreamEvent` `agent_updated_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | `AgentUpdatedEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `agent_updates.project_event` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/agent_updates.py`) | `docs/contracts/public-sse-streaming/examples/chat-handoff.ndjson` | ‚úÖ      | Projected as `kind=agent.updated` to make handoffs explicit for the UI (in addition to updating `agent`/`output_schema` internally). |

---

### RunItemStreamEvent ‚Äúname‚Äù values

| Event type/name          | Correlation keys       | What the event represents (from your Agents SDK doc) | Used? | Mode | Inbound schema (Pydantic model + path) | Outbound schema (Pydantic model + path or passthrough) | Frontend type (TS/Zod) | Reducer/handler | Test trace (golden) | Status | Notes                                                     |
| ------------------------ | ---------------------- | ---------------------------------------------------- | ----- | ---- | -------------------------------------- | ------------------------------------------------------ | ---------------------- | --------------- | ------------------- | ------ | --------------------------------------------------------- |
| `message_output_created` | (from `item: RunItem`) | Agent created a new message output RunItem.          | no    | ‚Äî    | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored: message rendering is driven by raw `response.output_text.delta` (+ `output_item.*`) events instead of run-item message wrappers. |
| `tool_called`            | (from `item: RunItem`) | Agent initiated a tool call RunItem.                 | yes   | prod | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`FunctionTool` or `McpTool`) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `run_items.project_event` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/run_items.py`) | `docs/contracts/public-sse-streaming/examples/chat-function-tool.ndjson` | ‚úÖ      | Produces ‚Äútool card start‚Äù events for function tools and MCP tools; built-in tools are primarily surfaced via raw Responses tool events. |
| `tool_output`            | (from `item: RunItem`) | Agent produced tool output RunItem.                  | yes   | prod | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolOutputEvent`, `ToolStatusEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `run_items.project_event` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/run_items.py`) | `docs/contracts/public-sse-streaming/examples/chat-function-tool.ndjson` | ‚úÖ      | Tool outputs are emitted only for `function` and `mcp` tools (sanitized); hosted tools update status/results via their dedicated raw events. |
| `reasoning_item_created` | (from `item: RunItem`) | Agent created a reasoning-related RunItem.           | no    | ‚Äî    | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored: we do not surface reasoning run-items; we optionally surface reasoning **summary** via raw Responses events. |
| `handoff_requested`      | (from `item: RunItem`) | A handoff was requested.                             | no    | ‚Äî    | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored in public SSE; the public stream uses `agent.updated` (from `agent_updated_stream_event`) as the stable ‚Äúhandoff occurred‚Äù signal. |
| `handoff_occured`        | (from `item: RunItem`) | A handoff occurred.                                  | no    | ‚Äî    | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Ignored in public SSE; the public stream uses `agent.updated` (from `agent_updated_stream_event`) as the stable ‚Äúhandoff occurred‚Äù signal. |
| `mcp_approval_requested` | (from `item: RunItem`) | MCP approval requested.                              | yes   | prod | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolStatusEvent` (`McpTool` status awaiting_approval) (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `run_items.project_event` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/run_items.py`) | `docs/contracts/public-sse-streaming/examples/chat-mcp-tool.ndjson` | ‚úÖ      | Drives the human approval UX gate for MCP tools (`tool.status=awaiting_approval`). |
| `mcp_approval_response`  | (from `item: RunItem`) | MCP approval response provided.                      | yes   | prod | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | `ToolApprovalEvent` (`apps/api-service/src/app/api/v1/shared/streaming.py`) | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | `PublicStreamProjector.project` ‚Üí `run_items.project_event` (`apps/api-service/src/app/api/v1/shared/public_stream_projector/run_items.py`) | `docs/contracts/public-sse-streaming/examples/chat-mcp-tool.ndjson` | ‚úÖ      | Projected as `kind=tool.approval` (approved/denied + optional reason); kept separate from `tool.status` which represents execution lifecycle. |
| `mcp_list_tools`         | (from `item: RunItem`) | Agent produced an MCP list-tools RunItem.            | no    | ‚Äî    | `AgentStreamEvent` `run_item_stream_event` (`apps/api-service/src/app/domain/ai/models.py`) | ‚Äî                                                      | `StreamingChatEvent` / `StreamingWorkflowEvent` (`apps/web-app/lib/api/client/types.gen.ts`) | ‚Äî               | ‚Äî                   | ‚õî      | Not currently surfaced in public SSE (we keep the public contract focused on end-user actions). |

---

## Filling rules (optional, but useful)
- Use **Used?** to answer ‚Äúdoes the API service depend on this event for public output or projection state?‚Äù (even if buffered / not emitted directly).
- Use **Mode** to reflect client exposure: **prod** (user-facing), **debug** (inspector tooling), **prod+debug** (both).
- Use **Status** to reflect end-to-end validation: ‚úÖ = exercised by a golden trace, üü® = not currently golden-covered, ‚¨ú = planned, ‚õî = ignored.
